(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0Z1T":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var o=i("748+"),n=i("FHFX"),s=i("fXoL"),a=i("ofXK"),c=i("1kSV");function r(e,t){if(1&e){const e=s.Ub();s.Tb(0,"a",19),s.fc("click",(function(t){s.Bc(e);const i=s.ic().$implicit;return s.ic(2).openModalAsignarRoles(i)})),s.Ob(1,"i",20),s.Sb()}}function l(e,t){if(1&e){const e=s.Ub();s.Tb(0,"a",21),s.fc("click",(function(t){s.Bc(e);const i=s.ic().$implicit;return s.ic(2).openModalVerDatosPaciente(i)})),s.Ob(1,"i",22),s.Sb()}}function b(e,t){if(1&e&&(s.Tb(0,"tr"),s.Tb(1,"td",13),s.Kc(2),s.Sb(),s.Tb(3,"td"),s.Tb(4,"div",14),s.Tb(5,"div",15),s.Tb(6,"p",16),s.Kc(7),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(8,"td"),s.Tb(9,"div",14),s.Tb(10,"div",15),s.Tb(11,"p",16),s.Kc(12),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(13,"td"),s.Tb(14,"div",14),s.Tb(15,"div",15),s.Tb(16,"p",16),s.Kc(17),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(18,"td"),s.Tb(19,"div",14),s.Tb(20,"div",15),s.Tb(21,"p",16),s.Kc(22),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(23,"td"),s.Tb(24,"div",14),s.Tb(25,"div",15),s.Tb(26,"p",16),s.Kc(27),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(28,"td"),s.Ic(29,r,2,0,"a",17),s.Ic(30,l,2,0,"a",18),s.Sb(),s.Sb()),2&e){const e=t.$implicit,i=t.index,o=s.ic(2);s.Ab(2),s.Mc(" ",i+1," "),s.Ab(5),s.Lc(e.name),s.Ab(5),s.Lc(e.lastname),s.Ab(5),s.Lc(e.email),s.Ab(5),s.Lc(e.ci),s.Ab(5),s.Lc(e.telefono),s.Ab(2),s.pc("ngIf",o.tableFor!==o.ROL_DOCTOR),s.Ab(1),s.pc("ngIf",o.tableFor===o.ROL_DOCTOR)}}function d(e,t){if(1&e&&(s.Rb(0),s.Tb(1,"div",8),s.Tb(2,"table",9),s.Tb(3,"thead"),s.Tb(4,"tr"),s.Tb(5,"th",10),s.Kc(6,"#"),s.Sb(),s.Tb(7,"th",11),s.Kc(8,"Nombre"),s.Sb(),s.Tb(9,"th",11),s.Kc(10,"Apellido"),s.Sb(),s.Tb(11,"th",11),s.Kc(12,"Correo"),s.Sb(),s.Tb(13,"th",11),s.Kc(14,"c\xe9dula"),s.Sb(),s.Tb(15,"th",11),s.Kc(16,"Tel\xe9fono"),s.Sb(),s.Tb(17,"th"),s.Kc(18," Acciones "),s.Sb(),s.Sb(),s.Sb(),s.Tb(19,"tbody"),s.Ic(20,b,31,8,"tr",12),s.Sb(),s.Sb(),s.Sb(),s.Qb()),2&e){const e=t.ngIf;s.Ab(20),s.pc("ngForOf",e)}}let u=(()=>{class e{constructor(e,t){this._userFacade=e,this._mainFacade=t,this.ROL_DOCTOR=o.h.DOCTOR,this.searchItem=""}ngOnInit(){console.log(this.tableFor)}getTitulo(){return this.tableFor==o.h.DOCTOR?"Pacientes":"Personal"}getDescripcion(){return this.tableFor==o.h.DOCTOR?"Pacientes actuamente registrados":"Personal registrado, m\xe9dicos, directores y administradores."}openModalCreateUpdate(e){this._userFacade.dispatchActionOpenModalCreateUpdateUser(e)}openModalConfirm(e){}openModalAsignarRoles(e){this._mainFacade.getHospitalSesion().subscribe(t=>{let i=e.roles.find(e=>e.idHospital._id===t.idHospital._id);this._userFacade.dispatchActionOpenModalAsignarRole(i,e._id)})}openModalSearchAddUsers(){this._userFacade.distpachActionOpenModalSearchUser()}openModalVerDatosPaciente(e){this._userFacade.dispatchActionOpenModalDatosPaciente(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(n.c),s.Nb(n.a))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-user-table"]],inputs:{tableFor:"tableFor",users$:"users$"},decls:12,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"card","card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"d-flex","mb-3","mt-3"],[1,"btn","btn-primary","ml-auto",3,"click"],[4,"ngIf"],[1,"table-responsive","table-bordered"],[1,"table","table-striped","mb-0","no-wrap","v-middle"],["scope","col",1,"text-center"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"d-flex","align-items-center"],[1,"ml-3"],[1,"font-bold","mb-0"],["href","javascript: void(0);","class","link","placement","top","ngbTooltip","Asignar Roles",3,"click",4,"ngIf"],["href","javascript: void(0);","class","link","placement","top","ngbTooltip","Ver datos",3,"click",4,"ngIf"],["href","javascript: void(0);","placement","top","ngbTooltip","Asignar Roles",1,"link",3,"click"],[1,"mdi","mdi-city"],["href","javascript: void(0);","placement","top","ngbTooltip","Ver datos",1,"link",3,"click"],[1,"mdi","mdi-account"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"h4",3),s.Kc(4),s.Sb(),s.Tb(5,"h5",4),s.Kc(6),s.Sb(),s.Tb(7,"div",5),s.Tb(8,"button",6),s.fc("click",(function(e){return t.openModalSearchAddUsers()})),s.Kc(9,"Agregar usuarios"),s.Sb(),s.Sb(),s.Ic(10,d,21,1,"ng-container",7),s.jc(11,"async"),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(4),s.Mc(" ",t.getTitulo()," "),s.Ab(2),s.Mc(" ",t.getDescripcion()," "),s.Ab(4),s.pc("ngIf",s.kc(11,3,t.users$)))},directives:[a.n,a.m,c.m],pipes:[a.b],styles:[""]}),e})()},EC2C:function(e,t,i){"use strict";i.r(t);var o=i("ofXK"),n=i("FtmO"),s=i("1kSV"),a=i("tyNb"),c=i("FHFX"),r=i("748+"),l=i("U43L"),b=i("o0su"),d=i("fXoL"),u=i("fNYS"),h=i("FUKR"),m=i("tUJ0");function p(e,t){1&e&&d.Ob(0,"div",8),2&e&&d.pc("id",t.$implicit)}function g(e,t){if(1&e){const e=d.Ub();d.Tb(0,"div",9),d.Tb(1,"input",10),d.fc("click",(function(t){return d.Bc(e),d.ic().terminarLlamada()})),d.Sb(),d.Sb()}}const f=function(){return["/doctor/seguimientos"]};function S(e,t){1&e&&(d.Tb(0,"div",11),d.Tb(1,"button",12),d.Kc(2," Volver a seguimientos"),d.Sb(),d.Sb()),2&e&&(d.Ab(1),d.pc("routerLink",d.sc(1,f)))}function v(e,t){1&e&&(d.Tb(0,"div"),d.Tb(1,"h3"),d.Kc(2,"Uniendose a la sala...."),d.Sb(),d.Sb())}function T(e,t){if(1&e&&d.Ob(0,"app-atender-seguimiento",20),2&e){const e=d.ic(2);d.pc("seguimiento",e.seguimientoPorAtender)}}function O(e,t){1&e&&(d.Tb(0,"div"),d.Kc(1,"cargando..."),d.Sb())}function _(e,t){if(1&e&&(d.Ob(0,"app-over-view",21),d.Ic(1,O,2,0,"div",7),d.jc(2,"async")),2&e){const e=d.ic(2);d.pc("userPerfil$",e.userProfile$),d.Ab(1),d.pc("ngIf",d.kc(2,2,e.isLoading$))}}function I(e,t){if(1&e&&d.Ob(0,"app-time-line",23),2&e){const e=d.ic(3);d.pc("idPaciente",e.seguimientoPorAtender.idPaciente._id)}}function C(e,t){if(1&e&&d.Ic(0,I,1,1,"app-time-line",22),2&e){const e=d.ic(2);d.pc("ngIf",e.showResumen)}}function y(e,t){if(1&e){const e=d.Ub();d.Rb(0),d.Tb(1,"div",13),d.Tb(2,"div",14),d.Tb(3,"ngb-tabset",15),d.fc("tabChange",(function(t){return d.Bc(e),d.ic().onChangeNav(t)})),d.Tb(4,"ngb-tab",16),d.Ic(5,T,1,1,"ng-template",17),d.Sb(),d.Tb(6,"ngb-tab",18),d.Ic(7,_,3,4,"ng-template",17),d.Sb(),d.Tb(8,"ngb-tab",19),d.Ic(9,C,1,1,"ng-template",17),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Qb()}}let P=(()=>{class e{constructor(e,t,i,o){this._userFacade=e,this._toastService=t,this.route=i,this._ngxAgoraService=o,this.showResumen=!1,this.localCallId="agora_local",this.remoteCalls=[],this.cargandoLLamada=!0,this.isConected=!1,this.DOCTOR=r.h.DOCTOR,this.uid=Math.floor(100*Math.random())}ngOnInit(){this.userProfile$=this._userFacade.getPerfilUser(),this.isLoading$=this._userFacade.getLoadingPerfilUserStore(),this.seguimientoPorAtender=this.route.snapshot.data.seguimientoPorAtender,this.rolUser=this.route.snapshot.params.rol,this.client=this._ngxAgoraService.createClient({mode:"rtc",codec:"h264"}),this.assignClientHandlers(),this.localStream=this._ngxAgoraService.createStream({streamID:this.uid,audio:!0,video:!0,screen:!1}),this.assignLocalStreamHandlers(),this.initLocalStream(()=>this.join(e=>this.publish(),e=>{this.cargandoLLamada=!1,this._toastService.showError("Error al unirse a la sala"),console.error(e)}))}onChangeNav({nextId:e}){"datos-paciente"===e&&this._userFacade.loadPerfilUser({_id:this.seguimientoPorAtender.idPaciente._id}),"resumen"===e&&(this.showResumen=!0)}join(e,t){this.client.join(null,this.seguimientoPorAtender._id,this.uid,e,t)}publish(){this.client.publish(this.localStream,e=>console.log("Publish local stream error: "+e))}assignClientHandlers(){this.client.on(l.a.LocalStreamPublished,e=>{console.log("Publish local stream successfully"),this.cargandoLLamada=!1,this.isConected=!0,this._toastService.showInfo("Se ha unido a la sala con \xe9xito")}),this.client.on(l.a.Error,e=>{console.log("Got error msg:",e.reason),"DYNAMIC_KEY_TIMEOUT"===e.reason&&this.client.renewChannelKey("",()=>console.log("Renewed the channel key successfully."),e=>console.error("Renew channel key failed: ",e))}),this.client.on(l.a.RemoteStreamAdded,e=>{this.client.subscribe(e.stream,{audio:!0,video:!0},e=>{console.log("Subscribe stream failed",e)})}),this.client.on(l.a.RemoteStreamSubscribed,e=>{const t=e.stream,i=this.getRemoteId(t);this.remoteCalls.length||(this.remoteCalls.push(i),this._toastService.showSuccess("Se ha establecido comunicaci\xf3n con \xe9xito"),setTimeout(()=>t.play(i),1e3))}),this.client.on(l.a.RemoteStreamRemoved,e=>{this._toastService.showInfo("El usuario a salido de la sala");const t=e.stream;t&&(t.stop(),this.remoteCalls=[],this.remoteStreams=[],console.log(`Remote stream is removed ${t.getId()}`))}),this.client.on(l.a.PeerLeave,e=>{const t=e.stream;t&&(t.stop(),this.remoteCalls=this.remoteCalls.filter(e=>e!==`${this.getRemoteId(t)}`),console.log(`${e.uid} left from this channel`))})}assignLocalStreamHandlers(){this.localStream.on(l.d.MediaAccessAllowed,()=>{console.log("accessAllowed"),this._toastService.showInfo("Permisos de accesos a la c\xe1mara y micr\xf3fono otorgados exitosamente")}),this.localStream.on(l.d.MediaAccessDenied,()=>{console.log("accessDenied"),this._toastService.showError("No ha otorgados los accesos a la c\xe1mara ni al micr\xf3fono")})}initLocalStream(e){this.localStream.init(()=>{this.localStream.play(this.localCallId),e&&e()},e=>console.error("getUserMedia failed",e))}getRemoteId(e){return`agora_remote-${e.getId()}`}terminarLlamada(){this.client.leave(()=>{this.localStream.stop(),this._toastService.showInfo("Usted a salido de la sala"),this.localStream.close(),this.isConected=!1,console.log("client leaves channel success")},e=>{console.log("channel leave failed"),console.error(e)})}ngOnDestroy(){this.terminarLlamada()}}return e.\u0275fac=function(t){return new(t||e)(d.Nb(c.c),d.Nb(b.d),d.Nb(a.a),d.Nb(l.c))},e.\u0275cmp=d.Hb({type:e,selectors:[["app-video-chat-room"]],decls:9,vars:6,consts:[[1,"row","border","h-75","no-gutters"],[1,"col-8","bg-light","border","h-100","d-flex","justify-content-center","overlay-container"],["class","remote",3,"id",4,"ngFor","ngForOf"],["class","justify-content-center overlay-item",4,"ngIf"],[1,"row","flex-nowrap","room-members"],[1,"local",3,"id"],["style","padding: 100px;",4,"ngIf"],[4,"ngIf"],[1,"remote",3,"id"],[1,"justify-content-center","overlay-item"],["type","button","value","Terminar",1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[2,"padding","100px"],[1,"btn","btn-info",3,"routerLink"],[1,"col-4","bg-light","border","scrollable","h-100"],[1,"card"],["type","pills",1,"custom-pills",3,"tabChange"],["title","Seguimiento","id","segumientos"],["ngbTabContent",""],["title","Datos usuario","id","datos-paciente"],["title","Resumen","id","resumen"],[3,"seguimiento"],[3,"userPerfil$"],[3,"idPaciente",4,"ngIf"],[3,"idPaciente"]],template:function(e,t){1&e&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.Ic(2,p,1,1,"div",2),d.Ic(3,g,2,0,"div",3),d.Tb(4,"div",4),d.Ob(5,"div",5),d.Sb(),d.Ic(6,S,3,2,"div",6),d.Ic(7,v,3,0,"div",7),d.Sb(),d.Ic(8,y,10,0,"ng-container",7),d.Sb()),2&e&&(d.Ab(2),d.pc("ngForOf",t.remoteCalls),d.Ab(1),d.pc("ngIf",t.isConected),d.Ab(2),d.pc("id",t.localCallId),d.Ab(1),d.pc("ngIf",!t.isConected&&t.rolUser===t.DOCTOR&&!t.cargandoLLamada),d.Ab(1),d.pc("ngIf",t.cargandoLLamada),d.Ab(1),d.pc("ngIf",t.rolUser===t.DOCTOR))},directives:[o.m,o.n,a.g,s.l,s.j,s.k,u.a,h.a,m.a],pipes:[o.b],styles:['.room-members[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap}.room-members[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{display:inline-block;float:none}.scrollable[_ngcontent-%COMP%]{overflow-y:auto}.overlay-container[_ngcontent-%COMP%]{position:relative}.tamanio[_ngcontent-%COMP%]{height:400px}.overlay-item[_ngcontent-%COMP%]{position:absolute;top:90%;bottom:0;left:0;right:0;text-align:center}.img-overlay[_ngcontent-%COMP%]:before{content:" ";display:block;height:50%}.border-video[_ngcontent-%COMP%]{height:400px}.local[_ngcontent-%COMP%]{position:fixed;right:1rem;bottom:1rem;width:20vw;height:20vh;border-radius:5px;overflow:hidden;z-index:1}.remote[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh}']}),e})();var A=i("jFXh"),w=i("IzEk"),L=i("5+tZ"),R=i("JIr8"),F=i("LRne"),M=i("EY2u"),k=i("JqCM");const K=[{resolve:{seguimientoPorAtender:(()=>{class e{constructor(e,t,i){this._toastService=e,this._spinner=t,this._verSeguimientoDetalleUseCase=i}resolve(e){this._spinner.show();const t=e.paramMap.get("id");return console.log(t),this._verSeguimientoDetalleUseCase.execute(t).pipe(Object(w.a)(1),Object(L.a)(e=>(this._spinner.hide(),console.log(e),e.estado&&e.estado===r.i.AGENDADO?(console.log("navega a video"),Object(F.a)(e)):(history.back(),this._toastService.showError("Esta cita ya fue atendida"),M.a))),Object(R.a)(e=>(this._spinner.hide(),history.back(),this._toastService.showError("Error al cargar cita"),Object(F.a)(e))))}}return e.\u0275fac=function(t){return new(t||e)(d.bc(b.d),d.bc(k.c),d.bc(A.i))},e.\u0275prov=d.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},path:"llamada/:id/:rol",component:P}];let j=(()=>{class e{}return e.\u0275mod=d.Lb({type:e}),e.\u0275inj=d.Kb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(K)],a.j]}),e})();i.d(t,"VideoChatModule",(function(){return U}));let U=(()=>{class e{}return e.\u0275mod=d.Lb({type:e}),e.\u0275inj=d.Kb({factory:function(t){return new(t||e)},imports:[[o.c,j,s.i,n.ProfileModule]]}),e})()},FtmO:function(e,t,i){"use strict";i.r(t);var o=i("ofXK"),n=i("FHFX"),s=i("fXoL"),a=i("1kSV"),c=i("FUKR"),r=i("tUJ0");function l(e,t){if(1&e&&s.Ob(0,"app-over-view",7),2&e){const e=s.ic();s.pc("userPerfil$",e.userPerfil$)}}function b(e,t){if(1&e&&(s.Rb(0),s.Ob(1,"app-time-line",9),s.Qb()),2&e){const e=t.ngIf;s.Ab(1),s.pc("idPaciente",e._id)}}function d(e,t){if(1&e&&(s.Ic(0,b,2,1,"ng-container",8),s.jc(1,"async")),2&e){const e=s.ic();s.pc("ngIf",s.kc(1,1,e.userPerfil$))}}let u=(()=>{class e{constructor(e,t){this._userFacade=e,this._mainFacade=t}ngOnInit(){this._mainFacade.getUserLogged().subscribe(e=>{this._userFacade.loadMiPerfil({_id:e._id})}),this.userPerfil$=this._userFacade.getMiPerfil()}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(n.c),s.Nb(n.a))},e.\u0275cmp=s.Hb({type:e,selectors:[["ng-component"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-lg-12","col-xlg-12","col-md-12"],[1,"card"],["type","pills",1,"custom-pills"],["title","Datos personales"],["ngbTabContent",""],["title","Resumen"],[3,"userPerfil$"],[4,"ngIf"],[3,"idPaciente"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"ngb-tabset",3),s.Tb(4,"ngb-tab",4),s.Ic(5,l,1,1,"ng-template",5),s.Sb(),s.Tb(6,"ngb-tab",6),s.Ic(7,d,2,3,"ng-template",5),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb())},directives:[a.l,a.j,a.k,c.a,o.n,r.a],pipes:[o.b],encapsulation:2}),e})();var h=i("tyNb"),m=i("3Pt+"),p=i("Kdsb");i.d(t,"PROFILE_ROUTES",(function(){return f})),i.d(t,"ProfileModule",(function(){return S}));const g={suppressScrollX:!0},f=[{path:"",component:u}];let S=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},providers:[{provide:p.a,useValue:g}],imports:[[o.c,a.i,m.j,m.s,h.j.forChild(f),p.c],a.i,a.h,m.j,m.s]}),e})()},WzrL:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("ofXK"),n=i("1kSV"),s=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},imports:[[o.c,n.i]]}),e})()},oRDy:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("ofXK"),n=i("1kSV"),s=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},imports:[[o.c,n.i]]}),e})()}}]);