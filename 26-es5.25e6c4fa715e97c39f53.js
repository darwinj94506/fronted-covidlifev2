function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var o=0,e=new Array(t.length);o<t.length;o++)e[o]=t[o];return e}}function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,o){for(var e=0;e<o.length;e++){var a=o[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,o,e){return o&&_defineProperties(t.prototype,o),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Dgjf:function(t,o,e){"use strict";e.r(o);var a=e("ofXK"),n=e("tyNb"),i=e("FHFX"),c=e("zZP4"),s=e("748+"),r=e("jFXh"),l=e("o0su"),d=e("XNiG"),b=e("1G5W"),u=e("TBdw"),g=e("fXoL"),p=e("JqCM"),h=e("1kSV"),f=["mapWrapper"];function P(t,o){1&t&&(g.Tb(0),g.Pc(1,":"),g.Sb())}function v(t,o){1&t&&(g.Tb(0),g.Pc(1,"/"),g.Sb())}function m(t,o){if(1&t&&(g.Tb(0),g.Pc(1),g.Nc(2,P,2,0,"ng-container",13),g.Pc(3),g.Nc(4,v,2,0,"ng-container",13),g.Sb()),2&t){var e=o.$implicit,a=o.index,n=g.lc();g.Ab(1),g.Rc(" ",null==e?null:e.tipo," "),g.Ab(1),g.sc("ngIf",e),g.Ab(1),g.Rc(" ",null==e?null:e.nombre," "),g.Ab(1),g.sc("ngIf",e&&a<n.espacios.length-1)}}var C,_=((C=function(){function t(o,e,a,n,i,c){_classCallCheck(this,t),this._mainFacade=o,this._verDetalleEspacioUseCase=e,this._spinner=a,this._toast=n,this._modalService=i,this._estadisticaFacade=c,this.CONFIRMADO=s.b.CONFIRMADO,this.SOSPECHOSO=s.b.SOSPECHOSO,this.RECUPERADO=s.b.RECUPERADO,this.FALLECIDO=s.b.FALLECIDO,this.HOSPITALIZADO=s.b.HOSPITALIZADO,this.title="Seleccione una opci\xf3n",this.espacios=[],this.coordenadasPorDiagnostico=[],this._destroyed$=new d.a}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.initMap()}},{key:"ngOnInit",value:function(){var t=this;this._estadisticaFacade.getCoordenadasPorDiagnosticoFromStorage().pipe(Object(b.a)(this._destroyed$)).subscribe((function(o){console.log(o),t.coordenadasPorDiagnostico=o.mapaPacientesPorDiagnostico})),this._mainFacade.getHospitalSesion().subscribe((function(o){t.hospital=o,t._estadisticaFacade.distpachActionLoadCoordenadasPorDiagnostico({tipo:s.e.COUNT_PACIENTES_POR_DIAGNOSTICO,idHospital:o.idHospital._id})}))}},{key:"initMap",value:function(){this.map=new google.maps.Map(this.mapElement.nativeElement,{zoom:13,center:{lat:-.929675,lng:-78.605851},mapTypeId:"satellite"}),this.heatmap=new google.maps.visualization.HeatmapLayer({data:[],map:this.map})}},{key:"configMap",value:function(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log([this.coordenadasPorDiagnostico,t]),o?t=this.coordenadasPorDiagnostico.find((function(t){return t.agrupadoPor.diagnostico_enum===o})):(t={agrupadoPor:{diagnostico_enum:s.b.CONFIRMADO},contador:[]},this.coordenadasPorDiagnostico.forEach((function(o){t.contador=[].concat(_toConsumableArray(t.contador),_toConsumableArray(o.contador))})),console.log(t));var e=[],a=new google.maps.LatLngBounds;if(null!=t&&null!=t&&t.contador.forEach((function(t){if(null!=t.latitud&&null!=t.longitud){var o=new google.maps.LatLng(t.latitud,t.longitud);a.extend(o),e.push(o)}})),this.getTitle(o,e.length),e.length>0)this.map.fitBounds(a),this.map.panToBounds(a),this.setMap([].concat(e));else{var n=new google.maps.LatLng(-.929675,-78.605851);a.extend(n),this.map.fitBounds(a),this.map.setZoom(13)}}},{key:"setMap",value:function(t){this.heatmap.setData(t)}},{key:"getTitle",value:function(t,o){switch(t){case s.b.CONFIRMADO:this.title="".concat(o," paciente").concat(1!==o?"s":""," confirmado").concat(1!==o?"s":"");break;case s.b.SOSPECHOSO:this.title="".concat(o," paciente").concat(1!==o?"s":"","  sospechoso").concat(1!==o?"s":"");break;case s.b.RECUPERADO:this.title="".concat(o," paciente").concat(1!==o?"s":"","  recuperado").concat(1!==o?"s":"");break;case s.b.FALLECIDO:this.title="".concat(o," paciente").concat(1!==o?"s":"","  fallecido").concat(1!==o?"s":"");break;case s.b.HOSPITALIZADO:this.title="".concat(o," paciente").concat(1!==o?"s":"","  hospitalizado").concat(1!==o?"s":"")}}},{key:"openModalFilter",value:function(){var t=this;this._spinner.show(),this._verDetalleEspacioUseCase.execute({idEspacio:this.hospital.idHospital.idEspacio}).pipe(Object(b.a)(this._destroyed$)).subscribe((function(o){switch(t._spinner.hide(),t.modalFilter=t._modalService.open(u.a),t.modalFilter.componentInstance.espacio=Object.assign({},o),t.modalFilter.componentInstance.idHospital=t.hospital.idHospital._id,t.modalFilter.componentInstance.forMapas=!0,o.tipo){case s.d.PROVINCIA:t.espacios[0]=o;break;case s.d.CANTON:t.espacios[1]=o;break;case s.d.PARROQUIA:t.espacios[2]=o;break;case s.d.BARRIO:t.espacios[3]=o}t.modalFilter.componentInstance.objectLugares=t.espacios,t.modalFilter.result.then((function(o){t.espacios=o})).catch((function(t){return console.log("salio")}))}),(function(o){t._toast.showError("Error el cargar, error:"+o.message),t._spinner.hide()}))}},{key:"ngOnDestroy",value:function(){this._destroyed$.next(),this._destroyed$.complete()}}]),t}()).\u0275fac=function(t){return new(t||C)(g.Pb(i.a),g.Pb(r.j),g.Pb(p.c),g.Pb(l.d),g.Pb(h.u),g.Pb(c.a))},C.\u0275cmp=g.Jb({type:C,selectors:[["app-maps"]],viewQuery:function(t,o){var e;1&t&&g.Wc(f,!0),2&t&&g.Bc(e=g.ic())&&(o.mapElement=e.first)},decls:25,vars:2,consts:[[1,"row"],[1,"col","col-md-1"],[3,"click"],[1,"col","col-md-11"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],["id","floating-panel"],[1,"btn","btn-outline-secondary",3,"click"],["id","map"],["mapWrapper",""],[4,"ngIf"]],template:function(t,o){1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Vb(2,"button",2),g.hc("click",(function(t){return o.openModalFilter()})),g.Pc(3,"Filtrar"),g.Ub(),g.Ub(),g.Vb(4,"div",3),g.Nc(5,m,5,4,"ng-container",4),g.Ub(),g.Ub(),g.Vb(6,"div",0),g.Vb(7,"div",5),g.Vb(8,"div",6),g.Vb(9,"div",7),g.Vb(10,"h4",8),g.Pc(11),g.Ub(),g.Vb(12,"div",9),g.Vb(13,"button",10),g.hc("click",(function(t){return o.configMap(o.CONFIRMADO)})),g.Pc(14,"Confirmados"),g.Ub(),g.Vb(15,"button",10),g.hc("click",(function(t){return o.configMap(o.SOSPECHOSO)})),g.Pc(16,"Sospechosos"),g.Ub(),g.Vb(17,"button",10),g.hc("click",(function(t){return o.configMap(o.RECUPERADO)})),g.Pc(18,"Recuperados"),g.Ub(),g.Vb(19,"button",10),g.hc("click",(function(t){return o.configMap(o.FALLECIDO)})),g.Pc(20,"Facellidos"),g.Ub(),g.Vb(21,"button",10),g.hc("click",(function(t){return o.configMap(o.HOSPITALIZADO)})),g.Pc(22,"Hospitalizados"),g.Ub(),g.Ub(),g.Qb(23,"div",11,12),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.Ab(5),g.sc("ngForOf",o.espacios),g.Ab(6),g.Qc(o.title))},directives:[a.n,a.o],styles:['#map[_ngcontent-%COMP%]{width:100%;height:500px;display:-webkit-box;display:flex}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:90%;margin:0;padding:0}#floating-panel[_ngcontent-%COMP%]{text-align:center;font-family:Roboto,"sans-serif";line-height:30px;padding:5px 5px 5px 10px;background-color:#fff;border:1px solid #999;left:25%;padding:5px;position:absolute;top:10px;z-index:5}.active[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:hover{background-color:#666;color:#fff}']}),C),U=e("LvDl");function O(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function D(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=g.lc();g.Ab(1),g.Qc(e.datosPorDiagnostico[0])}}function V(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function y(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=g.lc();g.Ab(1),g.Qc(e.datosPorDiagnostico[1])}}function A(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function I(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=g.lc(2);g.Ab(1),g.Qc(e.datosPorDiagnostico[2])}}function S(t,o){if(1&t&&g.Nc(0,I,2,1,"h2",20),2&t){var e=g.lc();g.sc("ngIf",!e.isLoading)}}function k(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function L(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=o.ngIf;g.Ab(1),g.Qc(e)}}function E(t,o){if(1&t&&(g.Nc(0,L,2,1,"h2",20),g.mc(1,"async")),2&t){var e=g.lc();g.sc("ngIf",g.nc(1,1,e.totalPacientes$))}}function F(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function R(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=g.lc(2);g.Ab(1),g.Qc(e.datosPorDiagnostico[3])}}function T(t,o){if(1&t&&g.Nc(0,R,2,1,"h2",20),2&t){var e=g.lc();g.sc("ngIf",!e.isLoading)}}function w(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function N(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=g.lc(2);g.Ab(1),g.Qc(e.datosPorDiagnostico[4])}}function j(t,o){if(1&t&&g.Nc(0,N,2,1,"h2",20),2&t){var e=g.lc();g.sc("ngIf",!e.isLoading)}}function $(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function H(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=g.lc(2);g.Ab(1),g.Qc(e.datosPorDiagnostico[5])}}function M(t,o){if(1&t&&g.Nc(0,H,2,1,"h2",20),2&t){var e=g.lc();g.sc("ngIf",!e.isLoading)}}function x(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function Q(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){var e=o.ngIf;g.Ab(1),g.Qc(e)}}function B(t,o){if(1&t&&(g.Nc(0,Q,2,1,"h2",20),g.mc(1,"async")),2&t){var e=g.lc();g.sc("ngIf",g.nc(1,1,e.totalDoctores$))}}var z,J=((z=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||z)},z.\u0275cmp=g.Jb({type:z,selectors:[["app-project-counter"]],inputs:{isLoadingTotalDoctores$:"isLoadingTotalDoctores$",isLoadingTotalPacientes$:"isLoadingTotalPacientes$",isLoading$:"isLoading$",totalPacientes$:"totalPacientes$",totalDoctores$:"totalDoctores$",datosPorDiagnostico:"datosPorDiagnostico"},decls:114,vars:32,consts:[[1,"row"],[1,"col-lg-3"],[1,"card"],[1,"card-body"],[1,"d-flex","no-block"],[1,"m-r-20","align-self-center"],[1,"lstick"],["src","assets/images/icon/staff.png","alt","Income"],[1,"align-self-center"],[1,"text-muted","m-t-10","m-b-0"],["class","m-t-0",4,"ngIf","ngIfElse"],["confirmados",""],["sospechosos",""],["asilados",""],["pacientes",""],["recuperados",""],["hospitalizados",""],["fallecidos",""],["doctores",""],[1,"m-t-0"],["class","m-t-0",4,"ngIf"]],template:function(t,o){if(1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Vb(2,"div",2),g.Vb(3,"div",3),g.Vb(4,"div",4),g.Vb(5,"div",5),g.Qb(6,"span",6),g.Qb(7,"img",7),g.Ub(),g.Vb(8,"div",8),g.Vb(9,"h6",9),g.Pc(10,"Confirmados"),g.Ub(),g.Nc(11,O,2,0,"h2",10),g.mc(12,"async"),g.Nc(13,D,2,1,"ng-template",null,11,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(15,"div",1),g.Vb(16,"div",2),g.Vb(17,"div",3),g.Vb(18,"div",4),g.Vb(19,"div",5),g.Qb(20,"span",6),g.Qb(21,"img",7),g.Ub(),g.Vb(22,"div",8),g.Vb(23,"h6",9),g.Pc(24,"Sospechosos"),g.Ub(),g.Nc(25,V,2,0,"h2",10),g.mc(26,"async"),g.Nc(27,y,2,1,"ng-template",null,12,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(29,"div",1),g.Vb(30,"div",2),g.Vb(31,"div",3),g.Vb(32,"div",4),g.Vb(33,"div",5),g.Qb(34,"span",6),g.Qb(35,"img",7),g.Ub(),g.Vb(36,"div",8),g.Vb(37,"h6",9),g.Pc(38,"Probables"),g.Ub(),g.Nc(39,A,2,0,"h2",10),g.mc(40,"async"),g.Nc(41,S,1,1,"ng-template",null,13,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(43,"div",1),g.Vb(44,"div",2),g.Vb(45,"div",3),g.Vb(46,"div",4),g.Vb(47,"div",5),g.Qb(48,"span",6),g.Qb(49,"img",7),g.Ub(),g.Vb(50,"div",8),g.Vb(51,"h6",9),g.Pc(52,"Total Pacientes"),g.Ub(),g.Nc(53,k,2,0,"h2",10),g.mc(54,"async"),g.Nc(55,E,2,3,"ng-template",null,14,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(57,"div",0),g.Vb(58,"div",1),g.Vb(59,"div",2),g.Vb(60,"div",3),g.Vb(61,"div",4),g.Vb(62,"div",5),g.Qb(63,"span",6),g.Qb(64,"img",7),g.Ub(),g.Vb(65,"div",8),g.Vb(66,"h6",9),g.Pc(67,"Recuperados"),g.Ub(),g.Nc(68,F,2,0,"h2",10),g.mc(69,"async"),g.Nc(70,T,1,1,"ng-template",null,15,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(72,"div",1),g.Vb(73,"div",2),g.Vb(74,"div",3),g.Vb(75,"div",4),g.Vb(76,"div",5),g.Qb(77,"span",6),g.Qb(78,"img",7),g.Ub(),g.Vb(79,"div",8),g.Vb(80,"h6",9),g.Pc(81,"Hospitalizados"),g.Ub(),g.Nc(82,w,2,0,"h2",10),g.mc(83,"async"),g.Nc(84,j,1,1,"ng-template",null,16,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(86,"div",1),g.Vb(87,"div",2),g.Vb(88,"div",3),g.Vb(89,"div",4),g.Vb(90,"div",5),g.Qb(91,"span",6),g.Qb(92,"img",7),g.Ub(),g.Vb(93,"div",8),g.Vb(94,"h6",9),g.Pc(95,"Fallecidos"),g.Ub(),g.Nc(96,$,2,0,"h2",10),g.mc(97,"async"),g.Nc(98,M,1,1,"ng-template",null,17,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(100,"div",1),g.Vb(101,"div",2),g.Vb(102,"div",3),g.Vb(103,"div",4),g.Vb(104,"div",5),g.Qb(105,"span",6),g.Qb(106,"img",7),g.Ub(),g.Vb(107,"div",8),g.Vb(108,"h6",9),g.Pc(109,"Doctores"),g.Ub(),g.Nc(110,x,2,0,"h2",10),g.mc(111,"async"),g.Nc(112,B,2,3,"ng-template",null,18,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t){var e=g.Cc(14),a=g.Cc(28),n=g.Cc(42),i=g.Cc(56),c=g.Cc(71),s=g.Cc(85),r=g.Cc(99),l=g.Cc(113);g.Ab(11),g.sc("ngIf",g.nc(12,16,o.isLoading$))("ngIfElse",e),g.Ab(14),g.sc("ngIf",g.nc(26,18,o.isLoading$))("ngIfElse",a),g.Ab(14),g.sc("ngIf",g.nc(40,20,o.isLoading$))("ngIfElse",n),g.Ab(14),g.sc("ngIf",g.nc(54,22,o.isLoadingTotalPacientes$))("ngIfElse",i),g.Ab(15),g.sc("ngIf",g.nc(69,24,o.isLoading$))("ngIfElse",c),g.Ab(14),g.sc("ngIf",g.nc(83,26,o.isLoading$))("ngIfElse",s),g.Ab(14),g.sc("ngIf",g.nc(97,28,o.isLoading$))("ngIfElse",r),g.Ab(14),g.sc("ngIf",g.nc(111,30,o.isLoadingTotalDoctores$))("ngIfElse",l)}},directives:[a.o],pipes:[a.b],encapsulation:2}),z),Z=e("LPYB");function W(t,o){1&t&&(g.Tb(0),g.Pc(1,":"),g.Sb())}function G(t,o){1&t&&(g.Tb(0),g.Pc(1,"/"),g.Sb())}function X(t,o){if(1&t&&(g.Tb(0),g.Pc(1),g.Nc(2,W,2,0,"ng-container",13),g.Pc(3),g.Nc(4,G,2,0,"ng-container",13),g.Sb()),2&t){var e=o.$implicit,a=o.index,n=g.lc();g.Ab(1),g.Rc(" ",null==e?null:e.tipo," "),g.Ab(1),g.sc("ngIf",e),g.Ab(1),g.Rc(" ",null==e?null:e.nombre," "),g.Ab(1),g.sc("ngIf",e&&a<n.espacios.length-1)}}function K(t,o){1&t&&(g.Vb(0,"div"),g.Pc(1," cargando..."),g.Ub())}function Y(t,o){1&t&&(g.Vb(0,"div"),g.Pc(1,"Cargando.. "),g.Ub())}function q(t,o){if(1&t&&(g.Tb(0),g.Vb(1,"tr"),g.Vb(2,"td",26),g.Pc(3,"Confirmados"),g.Ub(),g.Vb(4,"td",27),g.Pc(5),g.mc(6,"number"),g.Ub(),g.Ub(),g.Vb(7,"tr"),g.Vb(8,"td"),g.Pc(9,"Sospechosos"),g.Ub(),g.Vb(10,"td",28),g.Pc(11),g.mc(12,"number"),g.Ub(),g.Ub(),g.Vb(13,"tr"),g.Vb(14,"td"),g.Pc(15,"Probables"),g.Ub(),g.Vb(16,"td",28),g.Pc(17),g.mc(18,"number"),g.Ub(),g.Ub(),g.Vb(19,"tr"),g.Vb(20,"td"),g.Pc(21,"Recuperados"),g.Ub(),g.Vb(22,"td",28),g.Pc(23),g.mc(24,"number"),g.Ub(),g.Ub(),g.Vb(25,"tr"),g.Vb(26,"td"),g.Pc(27,"Hospitalizados"),g.Ub(),g.Vb(28,"td",28),g.Pc(29),g.mc(30,"number"),g.Ub(),g.Ub(),g.Vb(31,"tr"),g.Vb(32,"td"),g.Pc(33,"Fallecidos"),g.Ub(),g.Vb(34,"td",28),g.Pc(35),g.mc(36,"number"),g.Ub(),g.Ub(),g.Sb()),2&t){var e=o.ngIf,a=g.lc();g.Ab(5),g.Rc(" ",g.oc(6,6,a.calcularPorcentaje(a.doughnutChartDataDiagnostico[0],e),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(12,9,a.calcularPorcentaje(a.doughnutChartDataDiagnostico[1],e),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(18,12,a.calcularPorcentaje(a.doughnutChartDataDiagnostico[2],e),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(24,15,a.calcularPorcentaje(a.doughnutChartDataDiagnostico[3],e),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(30,18,a.calcularPorcentaje(a.doughnutChartDataDiagnostico[4],e),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(36,21,a.calcularPorcentaje(a.doughnutChartDataDiagnostico[5],e),"1.0-2")," %")}}var tt,ot,et,at,nt,it,ct=function(){return["rgba(76,139,236,1)","#06d79c","rgb(116, 90, 242)","#2BF60B","#F90C0C","#000000"]},st=function(t){return{backgroundColor:t}},rt=function(t){return[t]},lt=((tt=function(){function t(o,e,a,n,i,c){_classCallCheck(this,t),this._estadisticasFacade=o,this._modalService=e,this._verDetalleEspacioUseCase=a,this._spinner=n,this._toast=i,this._mainFacade=c,this._destroyed$=new d.a,this.espacios=[],this.dataDiaDiagnostico=[],this.lineChartDataPacientes=[{data:[],label:"Confirmados"},{data:[],label:"Sospechosos"}],this.lineChartOptions={scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(0, 0, 0, 0.1)"}}],xAxes:[{gridLines:{color:"rgba(0, 0, 0, 0.1)"}}]},lineTension:10,responsive:!0,maintainAspectRatio:!1},this.lineChartColors=[{backgroundColor:"rgba(76,139,236,1)",borderColor:"rgba(76,139,236,1)",pointBackgroundColor:"rgba(76,139,236,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(76,139,236,1)"},{backgroundColor:"#06d79c",borderColor:"#06d79c",pointBackgroundColor:"#06d79c",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#06d79c"},{backgroundColor:"rgba(234,237,242,1)",borderColor:"rgba(234,237,242,1)",pointBackgroundColor:"rgba(234,237,242,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(234,237,242,1)"}],this.lineChartLegend=!1,this.lineChartType="line",this.doughnutChartLabels=["Confirmados","Sospechosos","Aislados","Recuperados","Hospitaizados","Fallecidos"],this.doughnutChartOptions={borderWidth:2,maintainAspectRatio:!1},this.doughnutChartDataDiagnostico=[0,0,0,0,0,0],this.doughnutChartType="doughnut",this.doughnutChartLegend=!1,this.subtitle="This is some text within a card block."}return _createClass(t,[{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){var t=this;this._mainFacade.getHospitalSesion().subscribe((function(o){t.hospital=o;var e={idHospital:o.idHospital._id,role:s.h.PACIENTE,tipo:s.e.COUNT_PACIENTES_POR_DIAGNOSTICO};t._estadisticasFacade.distpachActionLoadEvolucionDiariaPacientes({idHospital:o.idHospital._id,role:s.h.PACIENTE,tipo:s.e.COUNT_PACIENTES_POR_DIA_POR_DIAGNOSTICO}),t._estadisticasFacade.distpachActionLoadPacientesPorDiagnostico(e);var a={idHospital:o.idHospital._id,role:s.h.DOCTOR,tipo:s.e.COUNT_USER_POR_ROLE_AND_HOSPITAL};t._estadisticasFacade.distpachActionLoadUsuariosPorRol({idHospital:o.idHospital._id,role:s.h.PACIENTE,tipo:s.e.COUNT_USER_POR_ROLE_AND_HOSPITAL}),t._estadisticasFacade.distpachActionLoadUsuariosPorRol(a)})),this._estadisticasFacade.getCountPacientesPorDiagnosticoDiarioFromStorage().pipe(Object(b.a)(this._destroyed$)).subscribe((function(o){t.buildLineChartData(o)})),this._estadisticasFacade.getCountPacientesPorDiagnosticoFromStorage().pipe(Object(b.a)(this._destroyed$)).subscribe((function(o){var e=o.find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.CONFIRMADO})),a=o.find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.SOSPECHOSO})),n=o.find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.PROBABLE})),i=o.find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.RECUPERADO})),c=o.find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.HOSPITALIZADO})),r=o.find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.FALLECIDO}));t.doughnutChartDataDiagnostico=[e?e.contador:0,a?a.contador:0,n?n.contador:0,i?i.contador:0,c?c.contador:0,r?r.contador:0]})),this.isLoadingPacientesPorDiagnostico$=this._estadisticasFacade.getIsloadingCountDiagnoticoFromStorage(),this.isLoadingChartEvolucionDiariaPacietes$=this._estadisticasFacade.getIsloadingCountDiagnoticoDiarioFromStorage(),this.totalDoctores$=this._estadisticasFacade.getTotalDoctoresFromStorage(),this.totalPacientes$=this._estadisticasFacade.getTotalPacientesFromStorage(),this.isLoadingTotalDoctores$=this._estadisticasFacade.getIsLoadingTotalDoctoresFromStorage(),this.isLoadingTotalPacientes$=this._estadisticasFacade.getIsLoadingTotalPacientesFromStorage()}},{key:"transformDate",value:function(t){return new Date(new Date(t).getFullYear(),new Date(t).getMonth(),new Date(t).getUTCDate())}},{key:"buildLineChartData",value:function(t){var o=this;this.dataDiaDiagnostico=[],this.lineChartLabelsDays=[];var e=U.chain(t).map((function(t){return Object.assign(Object.assign({},t),{agrupadoPor:{fecha_creacion:t.agrupadoPor.fecha_creacion,diagnostico_enum:t.agrupadoPor.diagnostico_enum,fecha_trasformada:o.transformDate(t.agrupadoPor.fecha_creacion).toLocaleDateString()}})})).orderBy((function(t){return t.agrupadoPor.fecha_creacion})).groupBy((function(t){return t.agrupadoPor.fecha_trasformada})).value(),a=[];for(var n in e){a.push(n);var i=e[n].find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.SOSPECHOSO})),c=e[n].find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.CONFIRMADO})),r=e[n].find((function(t){return t.agrupadoPor.diagnostico_enum===s.b.PROBABLE}));this.dataDiaDiagnostico.push({data:[i?i.contador:0,c?c.contador:0,r?r.contador:0],fecha:n})}var l=[],d=[],b=[];this.dataDiaDiagnostico.forEach((function(t,o){o>0?(l.push(t.data[0]+l[o-1]),d.push(t.data[1]+d[o-1]),b.push(t.data[2]+b[o-1])):(l.push(t.data[0]),d.push(t.data[1]),b.push(t.data[2]))})),this.lineChartDataPacientes[0].data=d,this.lineChartDataPacientes[1].data=l,this.lineChartLabelsDays=a}},{key:"calcularPorcentaje",value:function(t,o){return t<1?0:100*t/o}},{key:"openModalFilter",value:function(){var t=this;this._spinner.show(),this._verDetalleEspacioUseCase.execute({idEspacio:this.hospital.idHospital.idEspacio}).pipe(Object(b.a)(this._destroyed$)).subscribe((function(o){switch(t._spinner.hide(),t.modalFilter=t._modalService.open(u.a),t.modalFilter.componentInstance.espacio=Object.assign({},o),t.modalFilter.componentInstance.idHospital=t.hospital.idHospital._id,o.tipo){case s.d.PROVINCIA:t.espacios[0]=o;break;case s.d.CANTON:t.espacios[1]=o;break;case s.d.PARROQUIA:t.espacios[2]=o;break;case s.d.BARRIO:t.espacios[3]=o}t.modalFilter.componentInstance.objectLugares=t.espacios,t.modalFilter.result.then((function(o){t.espacios=o})).catch((function(t){return console.log("salio")}))}),(function(o){t._toast.showError("Error el cargar, error:"+o.message),t._spinner.hide()}))}},{key:"ngOnDestroy",value:function(){this._destroyed$.next(),this._destroyed$.complete()}}]),t}()).\u0275fac=function(t){return new(t||tt)(g.Pb(c.a),g.Pb(h.u),g.Pb(r.j),g.Pb(p.c),g.Pb(l.d),g.Pb(i.a))},tt.\u0275cmp=g.Jb({type:tt,selectors:[["app-statistics"]],decls:45,vars:33,consts:[[1,"row"],[1,"col","col-md-1"],[3,"click"],[1,"col","col-md-11"],[4,"ngFor","ngForOf"],[1,"col-12"],[3,"isLoading$","isLoadingTotalPacientes$","isLoadingTotalDoctores$","totalDoctores$","totalPacientes$","datosPorDiagnostico"],[1,"col-lg-9","col-md-12"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-wrap","m-b-30"],[1,"card-title"],[1,"lstick"],[4,"ngIf"],[1,"ml-auto"],[1,"list-inline"],[1,"list-inline-item"],[1,"text-info"],[1,"fa","fa-circle","font-10","m-r-10"],[1,"text-success"],[2,"height","370px"],["baseChart","",3,"datasets","labels","options","colors","legend","chartType"],[1,"col-lg-3","col-md-12"],[2,"height","220px"],["baseChart","","height","100px",3,"data","labels","options","legend","chartType","colors"],[1,"table","vm","font-14","m-b-0"],[1,"border-0"],[1,"text-right","font-medium","border-0"],[1,"text-right","font-medium"]],template:function(t,o){1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Vb(2,"button",2),g.hc("click",(function(t){return o.openModalFilter()})),g.Pc(3,"Filtrar"),g.Ub(),g.Ub(),g.Vb(4,"div",3),g.Nc(5,X,5,4,"ng-container",4),g.Ub(),g.Ub(),g.Vb(6,"div",0),g.Vb(7,"div",5),g.Qb(8,"app-project-counter",6),g.Ub(),g.Ub(),g.Vb(9,"div",0),g.Vb(10,"div",7),g.Vb(11,"div",8),g.Vb(12,"div",9),g.Vb(13,"div",10),g.Vb(14,"div"),g.Vb(15,"h4",11),g.Qb(16,"span",12),g.Pc(17,"Evoluci\xf3n diar\xeda"),g.Ub(),g.Nc(18,K,2,0,"div",13),g.mc(19,"async"),g.Ub(),g.Vb(20,"div",14),g.Vb(21,"ul",15),g.Vb(22,"li",16),g.Vb(23,"h6",17),g.Qb(24,"i",18),g.Pc(25,"Confirmados"),g.Ub(),g.Ub(),g.Vb(26,"li",16),g.Vb(27,"h6",19),g.Qb(28,"i",18),g.Pc(29," Sospechosos "),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(30,"div",20),g.Qb(31,"canvas",21),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(32,"div",22),g.Vb(33,"div",8),g.Vb(34,"div",9),g.Vb(35,"h4",11),g.Qb(36,"span",12),g.Pc(37,"Pacientes"),g.Ub(),g.Nc(38,Y,2,0,"div",13),g.mc(39,"async"),g.Vb(40,"div",23),g.Qb(41,"canvas",24),g.Ub(),g.Vb(42,"table",25),g.Nc(43,q,37,24,"ng-container",13),g.mc(44,"async"),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.Ab(5),g.sc("ngForOf",o.espacios),g.Ab(3),g.sc("isLoading$",o.isLoadingPacientesPorDiagnostico$)("isLoadingTotalPacientes$",o.isLoadingTotalPacientes$)("isLoadingTotalDoctores$",o.isLoadingTotalDoctores$)("totalDoctores$",o.totalDoctores$)("totalPacientes$",o.totalPacientes$)("datosPorDiagnostico",o.doughnutChartDataDiagnostico),g.Ab(10),g.sc("ngIf",g.nc(19,22,o.isLoadingChartEvolucionDiariaPacietes$)),g.Ab(13),g.sc("datasets",o.lineChartDataPacientes)("labels",o.lineChartLabelsDays)("options",o.lineChartOptions)("colors",o.lineChartColors)("legend",o.lineChartLegend)("chartType",o.lineChartType),g.Ab(7),g.sc("ngIf",g.nc(39,24,o.isLoadingPacientesPorDiagnostico$)),g.Ab(3),g.sc("data",o.doughnutChartDataDiagnostico)("labels",o.doughnutChartLabels)("options",o.doughnutChartOptions)("legend",o.doughnutChartLegend)("chartType",o.doughnutChartType)("colors",g.wc(31,rt,g.wc(29,st,g.vc(28,ct)))),g.Ab(2),g.sc("ngIf",g.nc(44,26,o.totalPacientes$)))},directives:[a.n,J,a.o,Z.a],pipes:[a.b,a.f],styles:[".ct-series-c[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#eceff1}.ct-series-d[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#745af2}.ct-series-b[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#26c6da}.ct-series-a[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#1e88e5}"]}),tt),dt=e("1kJB"),bt=((it=function(){function t(o){_classCallCheck(this,t),this._estRepo=o}return _createClass(t,[{key:"execute",value:function(t){return this._estRepo.getCountStatistics(t)}}]),t}()).\u0275fac=function(t){return new(t||it)(g.dc(dt.b))},it.\u0275prov=g.Lb({token:it,factory:it.\u0275fac,providedIn:"root"}),it),ut=((nt=function(){function t(o){_classCallCheck(this,t),this._estRepo=o}return _createClass(t,[{key:"execute",value:function(t){return this._estRepo.getCountStatistics(t)}}]),t}()).\u0275fac=function(t){return new(t||nt)(g.dc(dt.b))},nt.\u0275prov=g.Lb({token:nt,factory:nt.\u0275fac,providedIn:"root"}),nt),gt=((at=function(){function t(o){_classCallCheck(this,t),this._estRepo=o}return _createClass(t,[{key:"execute",value:function(t){return this._estRepo.getCountStatistics(t)}}]),t}()).\u0275fac=function(t){return new(t||at)(g.dc(dt.b))},at.\u0275prov=g.Lb({token:at,factory:at.\u0275fac,providedIn:"root"}),at),pt=((et=function(){function t(o){_classCallCheck(this,t),this._estRepo=o}return _createClass(t,[{key:"execute",value:function(t){return this._estRepo.getEstadisticasMapas(t)}}]),t}()).\u0275fac=function(t){return new(t||et)(g.dc(dt.b))},et.\u0275prov=g.Lb({token:et,factory:et.\u0275fac,providedIn:"root"}),et),ht=((ot=function(){function t(o){_classCallCheck(this,t),this._estRepo=o}return _createClass(t,[{key:"execute",value:function(t){return this._estRepo.getUsuarioSinSeguimientosPorDia(t)}}]),t}()).\u0275fac=function(t){return new(t||ot)(g.dc(dt.b))},ot.\u0275prov=g.Lb({token:ot,factory:ot.\u0275fac,providedIn:"root"}),ot),ft=function(t,o,e){return{success:t,warning:o,danger:e}};function Pt(t,o){if(1&t&&(g.Vb(0,"li"),g.Pc(1),g.Vb(2,"label",5),g.Pc(3),g.Ub(),g.Ub()),2&t){var e=o.$implicit;g.Ab(1),g.Sc(" ",null==e?null:e.name," ",null==e?null:e.lastname," "),g.Ab(1),g.sc("ngClass",g.yc(4,ft,"PROBABLE"==(null==e?null:null==e.ultimoSeguimiento?null:e.ultimoSeguimiento.diagnostico_actual),"SOSPECHOSO"==(null==e?null:null==e.ultimoSeguimiento?null:e.ultimoSeguimiento.diagnostico_actual),"CONFIRMADO"==(null==e?null:null==e.ultimoSeguimiento?null:e.ultimoSeguimiento.diagnostico_actual))),g.Ab(1),g.Rc(" ",null==e?null:null==e.ultimoSeguimiento?null:e.ultimoSeguimiento.diagnostico_actual," ")}}var vt,mt,Ct,_t,Ut=[{path:"",children:[{path:"mapas",component:_,data:{title:"Mapas"}},{path:"estadisticas",component:lt,data:{title:"Estad\xedsticas"}},{path:"pacientes-sin-seguimiento",component:(vt=function(){function t(o,e,a){_classCallCheck(this,t),this._verPacientesSinSeguimientosPorDiaUseCase=o,this._spinner=e,this._mainFacade=a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._mainFacade.getHospitalSesion().subscribe((function(o){console.log(o),t.hospitalSesion=o}))}},{key:"buscar",value:function(t){var o=this;console.log(t);var e={fecha:t,idHospital:this.hospitalSesion.idHospital._id};this._spinner.show(),this._verPacientesSinSeguimientosPorDiaUseCase.execute(e).subscribe((function(t){o._spinner.hide(),console.log(t),o.pacientes=t}),(function(t){o._spinner.hide()}))}}]),t}(),vt.\u0275fac=function(t){return new(t||vt)(g.Pb(ht),g.Pb(p.c),g.Pb(i.a))},vt.\u0275cmp=g.Jb({type:vt,selectors:[["app-sin-seguimiento"]],decls:10,vars:1,consts:[[1,"row"],["type","date","placeholder","Ingrese el d\xeda"],["fecha",""],[3,"click"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,o){if(1&t){var e=g.Wb();g.Vb(0,"div",0),g.Qb(1,"input",1,2),g.Vb(3,"button",3),g.hc("click",(function(t){g.Fc(e);var a=g.Cc(2);return o.buscar(a.value)})),g.Pc(4,"Generar reporte"),g.Ub(),g.Ub(),g.Qb(5,"br"),g.Qb(6,"br"),g.Vb(7,"div",0),g.Vb(8,"ol"),g.Nc(9,Pt,4,8,"li",4),g.Ub(),g.Ub()}2&t&&(g.Ab(9),g.sc("ngForOf",o.pacientes))},directives:[a.n,a.m],styles:[".success[_ngcontent-%COMP%]{background-color:#adff2f}.warning[_ngcontent-%COMP%]{background-color:orange}.danger[_ngcontent-%COMP%]{background-color:red}"]}),vt),data:{title:"Reporte de Pacientes Sin Seguimientos"}}]}],Ot=((mt=function t(){_classCallCheck(this,t)}).\u0275mod=g.Nb({type:mt}),mt.\u0275inj=g.Mb({factory:function(t){return new(t||mt)},imports:[[n.j.forChild(Ut)],n.j]}),mt),Dt=e("3Pt+"),Vt=e("Cr32"),yt=e("Kdsb"),At=e("ZOsW"),It=((Ct=function t(){_classCallCheck(this,t)}).\u0275mod=g.Nb({type:Ct}),Ct.\u0275inj=g.Mb({factory:function(t){return new(t||Ct)},imports:[[Dt.l,Dt.y,a.c,h.w,Z.b,Vt.b,yt.c,At.b],h.w,Z.b,Vt.b,yt.c,At.b]}),Ct),St=e("pxUr"),kt=e("snw9"),Lt=e("eIep"),Et=e("lJxs"),Ft=e("JIr8"),Rt=e("5+tZ"),Tt=e("vkgz"),wt=e("LRne"),Nt=e("HDdC"),jt=e("m4KN"),$t=function(t,o,e,a){var n,i=arguments.length,c=i<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,a);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(i<3?n(c):i>3?n(o,e,c):n(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c},Ht=function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},Mt=((_t=function t(o,e,a,n,i,c,r){var l=this;_classCallCheck(this,t),this.actions$=o,this._verTotalPacientesDiagnosticoUseCase=e,this._verEvolucionDiariaDiagnosticoUseCase=a,this._verTotalUsuariosPorRolUseCase=n,this._verCoordenasPorDiagnosticoUseCase=i,this._toastService=c,this._spinner=r,this.loadPacientesPorDiagnostico=this.actions$.pipe(Object(kt.d)(jt.g),Object(Lt.a)((function(t){var o=t.input;return l._verTotalPacientesDiagnosticoUseCase.execute(o).pipe(Object(Et.a)((function(t){return jt.i({output:t})})),Object(Ft.a)((function(t){return l._toastService.showError("error al consultar los diagnosticos, error:"+t.message),Object(wt.a)(jt.h({error:t}))})))}))),this.loadEvolucionDiariaPacientes=this.actions$.pipe(Object(kt.d)(jt.d),Object(Lt.a)((function(t){var o=t.input;return l._verEvolucionDiariaDiagnosticoUseCase.execute(o).pipe(Object(Et.a)((function(t){return jt.f({output:t})})),Object(Ft.a)((function(t){return l._toastService.showError("error al consultar la evoluci\xf3n diaria, error:"+t.message),Object(wt.a)(jt.e({error:t}))})))}))),this.loadTotalPersonal=this.actions$.pipe(Object(kt.d)(jt.j),Object(Rt.a)((function(t){var o=t.input;return l._verTotalUsuariosPorRolUseCase.execute(o).pipe(Object(Et.a)((function(t){return jt.l({output:t,role:o.role})})),Object(Ft.a)((function(t){return l._toastService.showError("error al cargar el total de \n                        ".concat(o.role===s.h.PACIENTE?"pacientes":"doctores",", error:").concat(t.message)),Object(wt.a)(jt.k({error:t,role:o.role}))})))}))),this.loadCoordenadasPorDiagnostico=this.actions$.pipe(Object(kt.d)(jt.a),Object(Tt.a)((function(t){return l._spinner.show()})),Object(Lt.a)((function(t){var o=t.input;return l._verCoordenasPorDiagnosticoUseCase.execute(o).pipe(Object(Et.a)((function(t){return jt.c({output:t})})),Object(Ft.a)((function(t){return l._toastService.showError("Error al cargar coordenadas, error: "+t.message),Object(wt.a)(jt.b({error:t}))})))})),Object(Tt.a)((function(t){return l._spinner.hide()})))}).\u0275fac=function(t){return new(t||_t)(g.dc(kt.a),g.dc(bt),g.dc(ut),g.dc(gt),g.dc(pt),g.dc(l.d),g.dc(p.c))},_t.\u0275prov=g.Lb({token:_t,factory:_t.\u0275fac}),$t([Object(kt.b)(),Ht("design:type",Nt.a)],_t.prototype,"loadPacientesPorDiagnostico",void 0),$t([Object(kt.b)(),Ht("design:type",Nt.a)],_t.prototype,"loadEvolucionDiariaPacientes",void 0),$t([Object(kt.b)(),Ht("design:type",Nt.a)],_t.prototype,"loadTotalPersonal",void 0),$t([Object(kt.b)(),Ht("design:type",Nt.a)],_t.prototype,"loadCoordenadasPorDiagnostico",void 0),_t),xt=e("m7o+"),Qt=e("kt0X");e.d(o,"DirectorModule",(function(){return zt}));var Bt,zt=((Bt=function t(){_classCallCheck(this,t)}).\u0275mod=g.Nb({type:Bt}),Bt.\u0275inj=g.Mb({factory:function(t){return new(t||Bt)},imports:[[a.c,Ot,St.a,It,Qt.j.forFeature("estadisticas",xt.a),kt.c.forFeature([Mt])]]}),Bt)}}]);