(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{BaiT:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return c})),r.d(t,"f",(function(){return a})),r.d(t,"e",(function(){return b}));var n=r("kt0X");const o=Object(n.n)("[Auth] Login",Object(n.s)()),s=Object(n.n)("[Auth] Login Success",Object(n.s)()),i=Object(n.n)("[Auth] Login Error",Object(n.s)()),c=Object(n.n)("[Auth] Register",Object(n.s)()),a=Object(n.n)("[Auth] Register Success",Object(n.s)()),b=Object(n.n)("[Auth] Register Error",Object(n.s)())},ENCF:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return c}));var n=r("kt0X"),o=r("BaiT");const s=Object(n.p)({isLoading:!1,error:""},Object(n.r)(o.a,(e,t)=>Object.assign(Object.assign({},e),{isLoading:!0,error:null})),Object(n.r)(o.c,(e,t)=>Object.assign(Object.assign({},e),{isLoading:!1})),Object(n.r)(o.b,(e,t)=>Object.assign(Object.assign({},e),{isLoading:!1,error:t.error})),Object(n.r)(o.d,(e,t)=>Object.assign(Object.assign({},e),{isLoading:!0})),Object(n.r)(o.f,(e,t)=>Object.assign(Object.assign({},e),{isLoading:!1})),Object(n.r)(o.e,(e,t)=>Object.assign(Object.assign({},e),{isLoading:!1,error:t.error})));function i(e,t){return s(e,t)}const c=e=>e},OpKh:function(e,t,r){"use strict";r.r(t);var n=r("tyNb"),o=r("ofXK"),s=r("1kSV"),i=r("3Pt+"),c=r("fXoL");let a=(()=>{class e{ngAfterViewInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Jb({type:e,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"error-box"],[1,"error-body","text-center"],[1,"error-title","text-danger"],[1,"text-uppercase","error-subtitle"],[1,"text-muted","m-t-30","m-b-30"],["href","#/dashboard/classic",1,"btn","btn-danger","btn-rounded","waves-effect","waves-light","m-b-40"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"h1",2),c.Pc(3,"404"),c.Ub(),c.Vb(4,"h3",3),c.Pc(5,"P\xc1GINA NO ENCONTRADA!"),c.Ub(),c.Vb(6,"p",4),c.Pc(7,"YOU SEEM TO BE TRYING TO FIND HIS WAY HOME"),c.Ub(),c.Vb(8,"a",5),c.Pc(9,"Back to home"),c.Ub(),c.Ub(),c.Ub())},encapsulation:2}),e})(),b=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Jb({type:e,selectors:[["app-lock"]],decls:18,vars:0,consts:[[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center",2,"background","url(assets/images/background/login-register.jpg) no-repeat center center"],[1,"auth-box"],[1,"logo"],[1,"db"],["alt","thumbnail","width","100","src","assets/images/users/1.jpg",1,"rounded-circle"],[1,"font-medium","m-b-20"],[1,"row"],[1,"col-12"],["action","index.html",1,"form-horizontal","m-t-20"],[1,"form-group","row"],["type","password","required","","placeholder","Password",1,"form-control","form-control-lg"],[1,"form-group","text-center"],[1,"col-xs-12","p-b-20"],["type","submit",1,"btn","btn-block","btn-lg","btn-info"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div"),c.Vb(3,"div",2),c.Vb(4,"span",3),c.Qb(5,"img",4),c.Ub(),c.Vb(6,"h5",5),c.Pc(7,"Genelia"),c.Ub(),c.Ub(),c.Vb(8,"div",6),c.Vb(9,"div",7),c.Vb(10,"form",8),c.Vb(11,"div",9),c.Vb(12,"div",7),c.Qb(13,"input",10),c.Ub(),c.Ub(),c.Vb(14,"div",11),c.Vb(15,"div",12),c.Vb(16,"button",13),c.Pc(17,"LOGIN"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub())},directives:[i.D,i.r,i.s],encapsulation:2}),e})();var l=r("XnIz"),d=r("UeRi"),u=r("jFXh"),p=r("JqCM");function g(e,t){if(1&e&&(c.Vb(0,"span",38),c.Pc(1),c.Ub()),2&e){const e=c.lc();c.Ab(1),c.Rc(" ",e.formsErrors.email," ")}}function h(e,t){if(1&e&&(c.Vb(0,"span",38),c.Pc(1),c.Ub()),2&e){const e=c.lc();c.Ab(1),c.Rc(" ",e.formsErrors.password," ")}}function f(e,t){1&e&&(c.Vb(0,"span",38),c.Pc(1," El Correo es obligatorio "),c.Ub())}function m(e,t){1&e&&(c.Vb(0,"span",38),c.Pc(1," El Correo es inv\xe1lido "),c.Ub())}const v=function(e){return{"d-none":e}},U=function(e){return{"d-block":e}},V={email:{required:"El Nombre es obligatorio",email:"El correo ingresado es inv\xe1lido"},password:{required:"La contrase\xf1a es obligatoria",minlength:"Una contrase\xf1a tiene al menos 6 caracteres"}};function j(e,t){1&e&&(c.Vb(0,"span",20),c.Pc(1," La contrase\xf1a es obligatoria "),c.Ub())}function O(e,t){1&e&&(c.Vb(0,"span",20),c.Pc(1," La contrase\xf1a debe tener almenos 6 caracteres "),c.Ub())}function w(e,t){1&e&&(c.Vb(0,"span"),c.Pc(1,"Repita la contrase\xf1a"),c.Ub())}function C(e,t){1&e&&(c.Vb(0,"span",20),c.Pc(1," Este campo es obligario "),c.Ub())}function P(e,t){if(1&e){const e=c.Wb();c.Vb(0,"div",10),c.Vb(1,"div",11),c.Vb(2,"input",21,22),c.hc("ngModelChange",(function(t){return c.Fc(e),c.lc().confirmPassword=t})),c.Ub(),c.Ub(),c.Vb(4,"div",14),c.Vb(5,"div",15),c.Nc(6,C,2,0,"span",16),c.Ub(),c.Ub(),c.Ub()}if(2&e){const e=c.Cc(3),t=c.lc();c.Ab(2),c.sc("ngModel",t.confirmPassword),c.Ab(4),c.sc("ngIf",e.touched&&(null==e.errors?null:e.errors.required))}}const k=function(e){return{"d-block":e}},y=[{path:"",children:[{path:"404",component:a},{path:"lock",component:b},{path:"login",component:(()=>{class e extends d.a{constructor(e,t,r,n){super(Object.assign({},V)),this.fb=e,this._spinner=t,this._recuperarContraseniaUsecase=r,this._authFacade=n,this.loginform=!0,this.recoverform=!1,this.emailRecupCont=""}ngOnInit(){this.initForm()}showRecoverForm(){this.loginform=!this.loginform,this.recoverform=!this.recoverform}initForm(){this.loginForm=this.fb.group({email:["",[i.B.required,i.B.email]],password:["",[i.B.required,i.B.minLength(6)]]})}onSubmit(){let e={email:this.loginForm.get("email").value,password:this.loginForm.get("password").value};this._authFacade.login(e)}recuperarContrasenia(){this._spinner.show(),this._recuperarContraseniaUsecase.execute({email:this.emailRecupCont}).subscribe(e=>{this._spinner.hide(),alert("Se ha enviado un mensaje a su correo")},e=>{this._spinner.hide(),alert(e),console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(i.f),c.Pb(p.c),c.Pb(u.g),c.Pb(l.a))},e.\u0275cmp=c.Jb({type:e,selectors:[["app-login"]],features:[c.xb],decls:68,vars:13,consts:[[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center",2,"background","url(assets/images/background/login-register.jpg) no-repeat center center"],[1,"auth-box","m-3","m-md-0"],["id","loginform",3,"ngClass"],[1,"logo"],[1,"db"],["src","assets/images/logo-icon.png","alt","logo"],[1,"font-medium","m-b-20"],[1,"row"],[1,"col-12"],["id","loginform",1,"form-horizontal","m-t-20",3,"formGroup"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],[1,"ti-user"],["type","text","placeholder","Correo","formControlName","email","id","email","aria-label","email","aria-describedby","basic-addon1",1,"form-control",3,"blur"],[1,"col","col-md-12"],["class","help-block",4,"ngIf"],["id","basic-addon2",1,"input-group-text"],[1,"ti-pencil"],["type","password","placeholder","Contrase\xf1a","aria-label","Password","formControlName","password","id","password","aria-describedby","basic-addon1",1,"form-control",3,"blur"],[1,"form-group","row"],[1,"col-md-12"],[1,"custom-control","custom-checkbox","d-flex"],["href","javascript:void(0)","id","to-recover",1,"text-dark","font-14","ml-auto",3,"click"],[1,"fa","fa-lock","m-r-5"],[1,"form-group","text-center"],[1,"col-xs-12","p-b-20"],[1,"btn","btn-block","btn-lg","btn-info",3,"click"],[1,"form-group","m-b-0","m-t-10"],[1,"col-sm-12","text-center"],["href","authentication/signup",1,"text-info","m-l-5"],["id","recoverform",3,"ngClass"],[1,"row","m-t-20"],[1,"col-12",3,"ngSubmit"],["recForm","ngForm"],["type","email","placeholder","Correo electr\xf3nico","name","emailRecupCont2","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["emailRecupCont2","ngModel"],["type","submit","name","action",1,"btn","btn-block","btn-lg","btn-danger",3,"disabled"],[1,"help-block"]],template:function(e,t){if(1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"div",3),c.Vb(4,"span",4),c.Qb(5,"img",5),c.Ub(),c.Vb(6,"h5",6),c.Pc(7,"Ingresar a Covid Life"),c.Ub(),c.Ub(),c.Vb(8,"div",7),c.Vb(9,"div",8),c.Vb(10,"form",9),c.Vb(11,"div",10),c.Vb(12,"div",11),c.Vb(13,"span",12),c.Qb(14,"i",13),c.Ub(),c.Ub(),c.Vb(15,"input",14),c.hc("blur",(function(e){return t.logValidationErrors(t.loginForm)})),c.Ub(),c.Qb(16,"br"),c.Vb(17,"div",7),c.Vb(18,"div",15),c.Nc(19,g,2,1,"span",16),c.Ub(),c.Ub(),c.Ub(),c.Vb(20,"div",10),c.Vb(21,"div",11),c.Vb(22,"span",17),c.Qb(23,"i",18),c.Ub(),c.Ub(),c.Vb(24,"input",19),c.hc("blur",(function(e){return t.logValidationErrors(t.loginForm)})),c.Ub(),c.Qb(25,"br"),c.Vb(26,"div",7),c.Vb(27,"div",15),c.Nc(28,h,2,1,"span",16),c.Ub(),c.Ub(),c.Ub(),c.Vb(29,"div",20),c.Vb(30,"div",21),c.Vb(31,"div",22),c.Vb(32,"a",23),c.hc("click",(function(e){return t.showRecoverForm()})),c.Qb(33,"i",24),c.Pc(34," \xbfOlvid\xf3 su contrase\xf1a?"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(35,"div",25),c.Vb(36,"div",26),c.Vb(37,"a",27),c.hc("click",(function(e){return t.onSubmit()})),c.Pc(38,"Ingresar"),c.Ub(),c.Ub(),c.Ub(),c.Vb(39,"div",28),c.Vb(40,"div",29),c.Pc(41," \xbfNo tiene una cuenta? "),c.Vb(42,"a",30),c.Vb(43,"b"),c.Pc(44,"Reg\xedstrase"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(45,"div",31),c.Vb(46,"div",3),c.Vb(47,"span",4),c.Qb(48,"img",5),c.Ub(),c.Vb(49,"h5",6),c.Pc(50,"Recuperar contrase\xf1a"),c.Ub(),c.Vb(51,"span"),c.Pc(52,"Ingrese su correo electr\xf3nico, y siga las intrucciones que le llegar\xe1n a su correo"),c.Ub(),c.Ub(),c.Vb(53,"div",32),c.Vb(54,"form",33,34),c.hc("ngSubmit",(function(e){return t.recuperarContrasenia()})),c.Vb(56,"div",20),c.Vb(57,"div",8),c.Vb(58,"input",35,36),c.hc("ngModelChange",(function(e){return t.emailRecupCont=e})),c.Ub(),c.Ub(),c.Vb(60,"div",7),c.Vb(61,"div",15),c.Nc(62,f,2,0,"span",16),c.Nc(63,m,2,0,"span",16),c.Ub(),c.Ub(),c.Ub(),c.Vb(64,"div",32),c.Vb(65,"div",8),c.Vb(66,"button",37),c.Pc(67,"Enviar"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e){const e=c.Cc(55),r=c.Cc(59);c.Ab(2),c.sc("ngClass",c.wc(9,v,t.recoverform)),c.Ab(8),c.sc("formGroup",t.loginForm),c.Ab(9),c.sc("ngIf",t.formsErrors.email),c.Ab(9),c.sc("ngIf",t.formsErrors.password),c.Ab(17),c.sc("ngClass",c.wc(11,U,t.recoverform)),c.Ab(13),c.sc("ngModel",t.emailRecupCont),c.Ab(4),c.sc("ngIf",r.touched&&(null==r.errors?null:r.errors.required)),c.Ab(1),c.sc("ngIf",r.touched&&(null==r.errors?null:r.errors.pattern)),c.Ab(3),c.sc("disabled",!e.valid)}},directives:[o.m,i.D,i.r,i.k,i.b,i.q,i.i,o.o,i.s,i.z,i.w,i.t],encapsulation:2}),e})()},{path:"reset-password",component:(()=>{class e{constructor(e,t,r,n,o){this._resetearContraseniaUsecase=e,this._router=r,this._spinner=n,this.rutaActiva=o,this.recoverform="",this.password="",this.confirmPassword="",this.resetLink=""}ngOnInit(){this.resetLink=document.location.href}cambiarContrasenia(){if(this.password!=this.confirmPassword)return alert("Las contrase\xf1as no coinciden"),!1;this._spinner.show(),console.log([this.password,this.resetLink]),this._resetearContraseniaUsecase.execute({nueva_contrasenia:this.password,resetlink:this.resetLink}).subscribe(e=>{this._spinner.hide(),alert("Por favor inicie sesi\xf3n"),this._router.navigate(["/authentication/login"])},e=>{console.log(e),this._spinner.hide(),alert(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(u.h),c.Pb(o.d),c.Pb(n.f),c.Pb(p.c),c.Pb(n.a))},e.\u0275cmp=c.Jb({type:e,selectors:[["app-reset-password"]],decls:27,vars:9,consts:[[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center",2,"background","url(assets/images/background/login-register.jpg) no-repeat center center"],[1,"auth-box","m-3","m-md-0"],[3,"ngClass"],[1,"logo"],[1,"db"],["src","assets/images/logo-icon.png","alt","logo"],[1,"font-medium","m-b-20"],[1,"row","m-t-20"],[1,"col-12",3,"ngSubmit"],["form","ngForm"],[1,"form-group","row"],[1,"col-12"],["type","password","placeholder","Contrase\xf1a","name","password1","required","","minlength","6",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["password1","ngModel"],[1,"row"],[1,"col","col-md-12"],["class","help-block",4,"ngIf"],[4,"ngIf"],["class","form-group row",4,"ngIf"],["type","submit","name","action",1,"btn","btn-block","btn-lg","btn-danger",3,"disabled"],[1,"help-block"],["type","password","placeholder","Repita la contrase\xf1a","name","confirmPassword2","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["confirmPassword2","ngModel"]],template:function(e,t){if(1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"div",3),c.Vb(4,"span",4),c.Qb(5,"img",5),c.Ub(),c.Vb(6,"h5",6),c.Pc(7,"Cambiar contrase\xf1a"),c.Ub(),c.Ub(),c.Vb(8,"div",7),c.Vb(9,"form",8,9),c.hc("ngSubmit",(function(e){return t.cambiarContrasenia()})),c.Vb(11,"span"),c.Pc(12,"Ingrese su nueva contrase\xf1a"),c.Ub(),c.Vb(13,"div",10),c.Vb(14,"div",11),c.Vb(15,"input",12,13),c.hc("ngModelChange",(function(e){return t.password=e})),c.Ub(),c.Ub(),c.Vb(17,"div",14),c.Vb(18,"div",15),c.Nc(19,j,2,0,"span",16),c.Nc(20,O,2,0,"span",16),c.Ub(),c.Ub(),c.Ub(),c.Nc(21,w,2,0,"span",17),c.Nc(22,P,7,2,"div",18),c.Vb(23,"div",7),c.Vb(24,"div",11),c.Vb(25,"button",19),c.Pc(26,"Enviar"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e){const e=c.Cc(10),r=c.Cc(16);c.Ab(2),c.sc("ngClass",c.wc(7,k,t.recoverform)),c.Ab(13),c.sc("ngModel",t.password),c.Ab(4),c.sc("ngIf",r.touched&&(null==r.errors?null:r.errors.required)),c.Ab(1),c.sc("ngIf",r.touched&&(null==r.errors?null:r.errors.minlength)),c.Ab(1),c.sc("ngIf",r.valid),c.Ab(1),c.sc("ngIf",r.valid),c.Ab(3),c.sc("disabled",!e.valid)}},directives:[o.m,i.D,i.r,i.s,i.b,i.z,i.n,i.q,i.t,o.o],styles:[""]}),e})()},{path:"signup",loadChildren:()=>r.e(18).then(r.bind(null,"ln4A")).then(e=>e.NGXFormWizardModule)}]}];var A=r("kt0X"),_=r("snw9"),I=r("ENCF"),L=r("vkgz"),x=r("XqQ8"),R=r("lJxs"),S=r("JIr8"),E=r("LRne"),N=r("HDdC"),F=r("BaiT"),M=r("W4xs"),q=r("+hi7"),T=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},z=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let X=(()=>{class e{constructor(e,t,r,n,o,s,i){this.actions$=e,this._authService=t,this._loginUseCase=r,this._mainFacade=n,this._spinner=o,this._logoutUsecase=s,this._userRegisterUseCase=i,this.login=this.actions$.pipe(Object(_.d)(F.a),Object(L.a)(e=>this._spinner.show()),Object(x.a)(({user:e})=>this._loginUseCase.execute(e).pipe(Object(R.a)(e=>F.c({userLogged:e})),Object(S.a)(e=>(this._authService.showError(e.message),Object(E.a)(F.b({error:e.message})))))),Object(L.a)(e=>this._spinner.hide())),this.loginSuccess=this.actions$.pipe(Object(_.d)(F.c),Object(L.a)(({userLogged:e})=>{this._mainFacade.setUserLogged(e),this._authService.saveLocalStorage(Object.assign({},e)),this._authService.navigateToInit(e)})),this.register=this.actions$.pipe(Object(_.d)(F.d),Object(L.a)(e=>this._spinner.show()),Object(x.a)(e=>this._userRegisterUseCase.execute(e.user).pipe(Object(R.a)(t=>(0==e.user.roles.length&&alert("SOLICITE AL ADMINISTRADOR EL INGRESO AL SISTEMA"),F.f({user:t}))),Object(S.a)(e=>Object(E.a)(F.e({error:e}))))),Object(L.a)(e=>this._spinner.hide())),this.registerSuccess=this.actions$.pipe(Object(_.d)(F.f),Object(L.a)(({user:e})=>{this._authService.showSuccess(`${e.name} ${e.lastname} usted se ha registrado exitosamente, por favor inicie sesi\xf3n`),this._authService.navigateToLogin()})),this.registerError=this.actions$.pipe(Object(_.d)(F.e),Object(L.a)(({error:e})=>{this._authService.showError(e)}))}}return e.\u0275fac=function(t){return new(t||e)(c.dc(_.a),c.dc(M.a),c.dc(u.e),c.dc(q.a),c.dc(p.c),c.dc(u.f),c.dc(u.i))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac}),T([Object(_.b)(),z("design:type",N.a)],e.prototype,"login",void 0),T([Object(_.b)({dispatch:!1}),z("design:type",N.a)],e.prototype,"loginSuccess",void 0),T([Object(_.b)(),z("design:type",N.a)],e.prototype,"register",void 0),T([Object(_.b)({dispatch:!1}),z("design:type",N.a)],e.prototype,"registerSuccess",void 0),T([Object(_.b)({dispatch:!1}),z("design:type",N.a)],e.prototype,"registerError",void 0),e})();r.d(t,"AuthenticationModule",(function(){return Q}));let Q=(()=>{class e{}return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,n.j.forChild(y),i.l,i.y,s.w,A.j.forFeature("authState",I.b),_.c.forFeature([X])]]}),e})()},XnIz:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("BaiT"),o=r("ENCF"),s=r("vkgz"),i=r("fXoL"),c=r("kt0X");let a=(()=>{class e{constructor(e){this.store=e}getAuthState(){return this.store.select(o.a).pipe(Object(s.a)(console.log))}login(e){this.store.dispatch(n.a({user:e}))}register(e){this.store.dispatch(n.d({user:e}))}}return e.\u0275fac=function(t){return new(t||e)(i.dc(c.h))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);