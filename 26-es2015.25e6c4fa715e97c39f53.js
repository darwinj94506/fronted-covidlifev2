(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Dgjf:function(t,o,i){"use strict";i.r(o);var e=i("ofXK"),a=i("tyNb"),s=i("FHFX"),n=i("zZP4"),c=i("748+"),r=i("jFXh"),d=i("o0su"),l=i("XNiG"),b=i("1G5W"),u=i("TBdw"),g=i("fXoL"),h=i("JqCM"),p=i("1kSV");const f=["mapWrapper"];function P(t,o){1&t&&(g.Tb(0),g.Pc(1,":"),g.Sb())}function m(t,o){1&t&&(g.Tb(0),g.Pc(1,"/"),g.Sb())}function U(t,o){if(1&t&&(g.Tb(0),g.Pc(1),g.Nc(2,P,2,0,"ng-container",13),g.Pc(3),g.Nc(4,m,2,0,"ng-container",13),g.Sb()),2&t){const t=o.$implicit,i=o.index,e=g.lc();g.Ab(1),g.Rc(" ",null==t?null:t.tipo," "),g.Ab(1),g.sc("ngIf",t),g.Ab(1),g.Rc(" ",null==t?null:t.nombre," "),g.Ab(1),g.sc("ngIf",t&&i<e.espacios.length-1)}}let C=(()=>{class t{constructor(t,o,i,e,a,s){this._mainFacade=t,this._verDetalleEspacioUseCase=o,this._spinner=i,this._toast=e,this._modalService=a,this._estadisticaFacade=s,this.CONFIRMADO=c.b.CONFIRMADO,this.SOSPECHOSO=c.b.SOSPECHOSO,this.RECUPERADO=c.b.RECUPERADO,this.FALLECIDO=c.b.FALLECIDO,this.HOSPITALIZADO=c.b.HOSPITALIZADO,this.title="Seleccione una opci\xf3n",this.espacios=[],this.coordenadasPorDiagnostico=[],this._destroyed$=new l.a}ngAfterViewInit(){this.initMap()}ngOnInit(){this._estadisticaFacade.getCoordenadasPorDiagnosticoFromStorage().pipe(Object(b.a)(this._destroyed$)).subscribe(t=>{console.log(t),this.coordenadasPorDiagnostico=t.mapaPacientesPorDiagnostico}),this._mainFacade.getHospitalSesion().subscribe(t=>{this.hospital=t,this._estadisticaFacade.distpachActionLoadCoordenadasPorDiagnostico({tipo:c.e.COUNT_PACIENTES_POR_DIAGNOSTICO,idHospital:t.idHospital._id})})}initMap(){this.map=new google.maps.Map(this.mapElement.nativeElement,{zoom:13,center:{lat:-.929675,lng:-78.605851},mapTypeId:"satellite"}),this.heatmap=new google.maps.visualization.HeatmapLayer({data:[],map:this.map})}configMap(t=null){let o;console.log([this.coordenadasPorDiagnostico,o]),t?o=this.coordenadasPorDiagnostico.find(o=>o.agrupadoPor.diagnostico_enum===t):(o={agrupadoPor:{diagnostico_enum:c.b.CONFIRMADO},contador:[]},this.coordenadasPorDiagnostico.forEach(t=>{o.contador=[...o.contador,...t.contador]}),console.log(o));let i=[],e=new google.maps.LatLngBounds;if(null!=o&&null!=o&&o.contador.forEach(t=>{if(null!=t.latitud&&null!=t.longitud){let o=new google.maps.LatLng(t.latitud,t.longitud);e.extend(o),i.push(o)}}),this.getTitle(t,i.length),i.length>0)this.map.fitBounds(e),this.map.panToBounds(e),this.setMap([...i]);else{let t=new google.maps.LatLng(-.929675,-78.605851);e.extend(t),this.map.fitBounds(e),this.map.setZoom(13)}}setMap(t){this.heatmap.setData(t)}getTitle(t,o){switch(t){case c.b.CONFIRMADO:this.title=`${o} paciente${1!==o?"s":""} confirmado${1!==o?"s":""}`;break;case c.b.SOSPECHOSO:this.title=`${o} paciente${1!==o?"s":""}  sospechoso${1!==o?"s":""}`;break;case c.b.RECUPERADO:this.title=`${o} paciente${1!==o?"s":""}  recuperado${1!==o?"s":""}`;break;case c.b.FALLECIDO:this.title=`${o} paciente${1!==o?"s":""}  fallecido${1!==o?"s":""}`;break;case c.b.HOSPITALIZADO:this.title=`${o} paciente${1!==o?"s":""}  hospitalizado${1!==o?"s":""}`}}openModalFilter(){this._spinner.show(),this._verDetalleEspacioUseCase.execute({idEspacio:this.hospital.idHospital.idEspacio}).pipe(Object(b.a)(this._destroyed$)).subscribe(t=>{switch(this._spinner.hide(),this.modalFilter=this._modalService.open(u.a),this.modalFilter.componentInstance.espacio=Object.assign({},t),this.modalFilter.componentInstance.idHospital=this.hospital.idHospital._id,this.modalFilter.componentInstance.forMapas=!0,t.tipo){case c.d.PROVINCIA:this.espacios[0]=t;break;case c.d.CANTON:this.espacios[1]=t;break;case c.d.PARROQUIA:this.espacios[2]=t;break;case c.d.BARRIO:this.espacios[3]=t}this.modalFilter.componentInstance.objectLugares=this.espacios,this.modalFilter.result.then(t=>{this.espacios=t}).catch(t=>console.log("salio"))},t=>{this._toast.showError("Error el cargar, error:"+t.message),this._spinner.hide()})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}return t.\u0275fac=function(o){return new(o||t)(g.Pb(s.a),g.Pb(r.j),g.Pb(h.c),g.Pb(d.d),g.Pb(p.u),g.Pb(n.a))},t.\u0275cmp=g.Jb({type:t,selectors:[["app-maps"]],viewQuery:function(t,o){var i;1&t&&g.Wc(f,!0),2&t&&g.Bc(i=g.ic())&&(o.mapElement=i.first)},decls:25,vars:2,consts:[[1,"row"],[1,"col","col-md-1"],[3,"click"],[1,"col","col-md-11"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],["id","floating-panel"],[1,"btn","btn-outline-secondary",3,"click"],["id","map"],["mapWrapper",""],[4,"ngIf"]],template:function(t,o){1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Vb(2,"button",2),g.hc("click",(function(t){return o.openModalFilter()})),g.Pc(3,"Filtrar"),g.Ub(),g.Ub(),g.Vb(4,"div",3),g.Nc(5,U,5,4,"ng-container",4),g.Ub(),g.Ub(),g.Vb(6,"div",0),g.Vb(7,"div",5),g.Vb(8,"div",6),g.Vb(9,"div",7),g.Vb(10,"h4",8),g.Pc(11),g.Ub(),g.Vb(12,"div",9),g.Vb(13,"button",10),g.hc("click",(function(t){return o.configMap(o.CONFIRMADO)})),g.Pc(14,"Confirmados"),g.Ub(),g.Vb(15,"button",10),g.hc("click",(function(t){return o.configMap(o.SOSPECHOSO)})),g.Pc(16,"Sospechosos"),g.Ub(),g.Vb(17,"button",10),g.hc("click",(function(t){return o.configMap(o.RECUPERADO)})),g.Pc(18,"Recuperados"),g.Ub(),g.Vb(19,"button",10),g.hc("click",(function(t){return o.configMap(o.FALLECIDO)})),g.Pc(20,"Facellidos"),g.Ub(),g.Vb(21,"button",10),g.hc("click",(function(t){return o.configMap(o.HOSPITALIZADO)})),g.Pc(22,"Hospitalizados"),g.Ub(),g.Ub(),g.Qb(23,"div",11,12),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.Ab(5),g.sc("ngForOf",o.espacios),g.Ab(6),g.Qc(o.title))},directives:[e.n,e.o],styles:['#map[_ngcontent-%COMP%]{width:100%;height:500px;display:-webkit-box;display:flex}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:90%;margin:0;padding:0}#floating-panel[_ngcontent-%COMP%]{text-align:center;font-family:Roboto,"sans-serif";line-height:30px;padding:5px 5px 5px 10px;background-color:#fff;border:1px solid #999;left:25%;padding:5px;position:absolute;top:10px;z-index:5}.active[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:hover{background-color:#666;color:#fff}']}),t})();var O=i("LvDl");function v(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function _(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=g.lc();g.Ab(1),g.Qc(t.datosPorDiagnostico[0])}}function D(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function V(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=g.lc();g.Ab(1),g.Qc(t.datosPorDiagnostico[1])}}function A(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function I(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=g.lc(2);g.Ab(1),g.Qc(t.datosPorDiagnostico[2])}}function L(t,o){if(1&t&&g.Nc(0,I,2,1,"h2",20),2&t){const t=g.lc();g.sc("ngIf",!t.isLoading)}}function S(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function y(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=o.ngIf;g.Ab(1),g.Qc(t)}}function E(t,o){if(1&t&&(g.Nc(0,y,2,1,"h2",20),g.mc(1,"async")),2&t){const t=g.lc();g.sc("ngIf",g.nc(1,1,t.totalPacientes$))}}function F(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function R(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=g.lc(2);g.Ab(1),g.Qc(t.datosPorDiagnostico[3])}}function $(t,o){if(1&t&&g.Nc(0,R,2,1,"h2",20),2&t){const t=g.lc();g.sc("ngIf",!t.isLoading)}}function T(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function N(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=g.lc(2);g.Ab(1),g.Qc(t.datosPorDiagnostico[4])}}function w(t,o){if(1&t&&g.Nc(0,N,2,1,"h2",20),2&t){const t=g.lc();g.sc("ngIf",!t.isLoading)}}function j(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function k(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=g.lc(2);g.Ab(1),g.Qc(t.datosPorDiagnostico[5])}}function M(t,o){if(1&t&&g.Nc(0,k,2,1,"h2",20),2&t){const t=g.lc();g.sc("ngIf",!t.isLoading)}}function x(t,o){1&t&&(g.Vb(0,"h2",19),g.Pc(1,"cargando..."),g.Ub())}function H(t,o){if(1&t&&(g.Vb(0,"h2",19),g.Pc(1),g.Ub()),2&t){const t=o.ngIf;g.Ab(1),g.Qc(t)}}function Q(t,o){if(1&t&&(g.Nc(0,H,2,1,"h2",20),g.mc(1,"async")),2&t){const t=g.lc();g.sc("ngIf",g.nc(1,1,t.totalDoctores$))}}let B=(()=>{class t{constructor(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=g.Jb({type:t,selectors:[["app-project-counter"]],inputs:{isLoadingTotalDoctores$:"isLoadingTotalDoctores$",isLoadingTotalPacientes$:"isLoadingTotalPacientes$",isLoading$:"isLoading$",totalPacientes$:"totalPacientes$",totalDoctores$:"totalDoctores$",datosPorDiagnostico:"datosPorDiagnostico"},decls:114,vars:32,consts:[[1,"row"],[1,"col-lg-3"],[1,"card"],[1,"card-body"],[1,"d-flex","no-block"],[1,"m-r-20","align-self-center"],[1,"lstick"],["src","assets/images/icon/staff.png","alt","Income"],[1,"align-self-center"],[1,"text-muted","m-t-10","m-b-0"],["class","m-t-0",4,"ngIf","ngIfElse"],["confirmados",""],["sospechosos",""],["asilados",""],["pacientes",""],["recuperados",""],["hospitalizados",""],["fallecidos",""],["doctores",""],[1,"m-t-0"],["class","m-t-0",4,"ngIf"]],template:function(t,o){if(1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Vb(2,"div",2),g.Vb(3,"div",3),g.Vb(4,"div",4),g.Vb(5,"div",5),g.Qb(6,"span",6),g.Qb(7,"img",7),g.Ub(),g.Vb(8,"div",8),g.Vb(9,"h6",9),g.Pc(10,"Confirmados"),g.Ub(),g.Nc(11,v,2,0,"h2",10),g.mc(12,"async"),g.Nc(13,_,2,1,"ng-template",null,11,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(15,"div",1),g.Vb(16,"div",2),g.Vb(17,"div",3),g.Vb(18,"div",4),g.Vb(19,"div",5),g.Qb(20,"span",6),g.Qb(21,"img",7),g.Ub(),g.Vb(22,"div",8),g.Vb(23,"h6",9),g.Pc(24,"Sospechosos"),g.Ub(),g.Nc(25,D,2,0,"h2",10),g.mc(26,"async"),g.Nc(27,V,2,1,"ng-template",null,12,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(29,"div",1),g.Vb(30,"div",2),g.Vb(31,"div",3),g.Vb(32,"div",4),g.Vb(33,"div",5),g.Qb(34,"span",6),g.Qb(35,"img",7),g.Ub(),g.Vb(36,"div",8),g.Vb(37,"h6",9),g.Pc(38,"Probables"),g.Ub(),g.Nc(39,A,2,0,"h2",10),g.mc(40,"async"),g.Nc(41,L,1,1,"ng-template",null,13,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(43,"div",1),g.Vb(44,"div",2),g.Vb(45,"div",3),g.Vb(46,"div",4),g.Vb(47,"div",5),g.Qb(48,"span",6),g.Qb(49,"img",7),g.Ub(),g.Vb(50,"div",8),g.Vb(51,"h6",9),g.Pc(52,"Total Pacientes"),g.Ub(),g.Nc(53,S,2,0,"h2",10),g.mc(54,"async"),g.Nc(55,E,2,3,"ng-template",null,14,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(57,"div",0),g.Vb(58,"div",1),g.Vb(59,"div",2),g.Vb(60,"div",3),g.Vb(61,"div",4),g.Vb(62,"div",5),g.Qb(63,"span",6),g.Qb(64,"img",7),g.Ub(),g.Vb(65,"div",8),g.Vb(66,"h6",9),g.Pc(67,"Recuperados"),g.Ub(),g.Nc(68,F,2,0,"h2",10),g.mc(69,"async"),g.Nc(70,$,1,1,"ng-template",null,15,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(72,"div",1),g.Vb(73,"div",2),g.Vb(74,"div",3),g.Vb(75,"div",4),g.Vb(76,"div",5),g.Qb(77,"span",6),g.Qb(78,"img",7),g.Ub(),g.Vb(79,"div",8),g.Vb(80,"h6",9),g.Pc(81,"Hospitalizados"),g.Ub(),g.Nc(82,T,2,0,"h2",10),g.mc(83,"async"),g.Nc(84,w,1,1,"ng-template",null,16,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(86,"div",1),g.Vb(87,"div",2),g.Vb(88,"div",3),g.Vb(89,"div",4),g.Vb(90,"div",5),g.Qb(91,"span",6),g.Qb(92,"img",7),g.Ub(),g.Vb(93,"div",8),g.Vb(94,"h6",9),g.Pc(95,"Fallecidos"),g.Ub(),g.Nc(96,j,2,0,"h2",10),g.mc(97,"async"),g.Nc(98,M,1,1,"ng-template",null,17,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(100,"div",1),g.Vb(101,"div",2),g.Vb(102,"div",3),g.Vb(103,"div",4),g.Vb(104,"div",5),g.Qb(105,"span",6),g.Qb(106,"img",7),g.Ub(),g.Vb(107,"div",8),g.Vb(108,"h6",9),g.Pc(109,"Doctores"),g.Ub(),g.Nc(110,x,2,0,"h2",10),g.mc(111,"async"),g.Nc(112,Q,2,3,"ng-template",null,18,g.Oc),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t){const t=g.Cc(14),i=g.Cc(28),e=g.Cc(42),a=g.Cc(56),s=g.Cc(71),n=g.Cc(85),c=g.Cc(99),r=g.Cc(113);g.Ab(11),g.sc("ngIf",g.nc(12,16,o.isLoading$))("ngIfElse",t),g.Ab(14),g.sc("ngIf",g.nc(26,18,o.isLoading$))("ngIfElse",i),g.Ab(14),g.sc("ngIf",g.nc(40,20,o.isLoading$))("ngIfElse",e),g.Ab(14),g.sc("ngIf",g.nc(54,22,o.isLoadingTotalPacientes$))("ngIfElse",a),g.Ab(15),g.sc("ngIf",g.nc(69,24,o.isLoading$))("ngIfElse",s),g.Ab(14),g.sc("ngIf",g.nc(83,26,o.isLoading$))("ngIfElse",n),g.Ab(14),g.sc("ngIf",g.nc(97,28,o.isLoading$))("ngIfElse",c),g.Ab(14),g.sc("ngIf",g.nc(111,30,o.isLoadingTotalDoctores$))("ngIfElse",r)}},directives:[e.o],pipes:[e.b],encapsulation:2}),t})();var z=i("LPYB");function J(t,o){1&t&&(g.Tb(0),g.Pc(1,":"),g.Sb())}function Z(t,o){1&t&&(g.Tb(0),g.Pc(1,"/"),g.Sb())}function W(t,o){if(1&t&&(g.Tb(0),g.Pc(1),g.Nc(2,J,2,0,"ng-container",13),g.Pc(3),g.Nc(4,Z,2,0,"ng-container",13),g.Sb()),2&t){const t=o.$implicit,i=o.index,e=g.lc();g.Ab(1),g.Rc(" ",null==t?null:t.tipo," "),g.Ab(1),g.sc("ngIf",t),g.Ab(1),g.Rc(" ",null==t?null:t.nombre," "),g.Ab(1),g.sc("ngIf",t&&i<e.espacios.length-1)}}function G(t,o){1&t&&(g.Vb(0,"div"),g.Pc(1," cargando..."),g.Ub())}function X(t,o){1&t&&(g.Vb(0,"div"),g.Pc(1,"Cargando.. "),g.Ub())}function K(t,o){if(1&t&&(g.Tb(0),g.Vb(1,"tr"),g.Vb(2,"td",26),g.Pc(3,"Confirmados"),g.Ub(),g.Vb(4,"td",27),g.Pc(5),g.mc(6,"number"),g.Ub(),g.Ub(),g.Vb(7,"tr"),g.Vb(8,"td"),g.Pc(9,"Sospechosos"),g.Ub(),g.Vb(10,"td",28),g.Pc(11),g.mc(12,"number"),g.Ub(),g.Ub(),g.Vb(13,"tr"),g.Vb(14,"td"),g.Pc(15,"Probables"),g.Ub(),g.Vb(16,"td",28),g.Pc(17),g.mc(18,"number"),g.Ub(),g.Ub(),g.Vb(19,"tr"),g.Vb(20,"td"),g.Pc(21,"Recuperados"),g.Ub(),g.Vb(22,"td",28),g.Pc(23),g.mc(24,"number"),g.Ub(),g.Ub(),g.Vb(25,"tr"),g.Vb(26,"td"),g.Pc(27,"Hospitalizados"),g.Ub(),g.Vb(28,"td",28),g.Pc(29),g.mc(30,"number"),g.Ub(),g.Ub(),g.Vb(31,"tr"),g.Vb(32,"td"),g.Pc(33,"Fallecidos"),g.Ub(),g.Vb(34,"td",28),g.Pc(35),g.mc(36,"number"),g.Ub(),g.Ub(),g.Sb()),2&t){const t=o.ngIf,i=g.lc();g.Ab(5),g.Rc(" ",g.oc(6,6,i.calcularPorcentaje(i.doughnutChartDataDiagnostico[0],t),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(12,9,i.calcularPorcentaje(i.doughnutChartDataDiagnostico[1],t),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(18,12,i.calcularPorcentaje(i.doughnutChartDataDiagnostico[2],t),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(24,15,i.calcularPorcentaje(i.doughnutChartDataDiagnostico[3],t),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(30,18,i.calcularPorcentaje(i.doughnutChartDataDiagnostico[4],t),"1.0-2")," %"),g.Ab(6),g.Rc("",g.oc(36,21,i.calcularPorcentaje(i.doughnutChartDataDiagnostico[5],t),"1.0-2")," %")}}const Y=function(){return["rgba(76,139,236,1)","#06d79c","rgb(116, 90, 242)","#2BF60B","#F90C0C","#000000"]},q=function(t){return{backgroundColor:t}},tt=function(t){return[t]};let ot=(()=>{class t{constructor(t,o,i,e,a,s){this._estadisticasFacade=t,this._modalService=o,this._verDetalleEspacioUseCase=i,this._spinner=e,this._toast=a,this._mainFacade=s,this._destroyed$=new l.a,this.espacios=[],this.dataDiaDiagnostico=[],this.lineChartDataPacientes=[{data:[],label:"Confirmados"},{data:[],label:"Sospechosos"}],this.lineChartOptions={scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{color:"rgba(0, 0, 0, 0.1)"}}],xAxes:[{gridLines:{color:"rgba(0, 0, 0, 0.1)"}}]},lineTension:10,responsive:!0,maintainAspectRatio:!1},this.lineChartColors=[{backgroundColor:"rgba(76,139,236,1)",borderColor:"rgba(76,139,236,1)",pointBackgroundColor:"rgba(76,139,236,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(76,139,236,1)"},{backgroundColor:"#06d79c",borderColor:"#06d79c",pointBackgroundColor:"#06d79c",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#06d79c"},{backgroundColor:"rgba(234,237,242,1)",borderColor:"rgba(234,237,242,1)",pointBackgroundColor:"rgba(234,237,242,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(234,237,242,1)"}],this.lineChartLegend=!1,this.lineChartType="line",this.doughnutChartLabels=["Confirmados","Sospechosos","Aislados","Recuperados","Hospitaizados","Fallecidos"],this.doughnutChartOptions={borderWidth:2,maintainAspectRatio:!1},this.doughnutChartDataDiagnostico=[0,0,0,0,0,0],this.doughnutChartType="doughnut",this.doughnutChartLegend=!1,this.subtitle="This is some text within a card block."}ngAfterViewInit(){}ngOnInit(){this._mainFacade.getHospitalSesion().subscribe(t=>{this.hospital=t;let o={idHospital:t.idHospital._id,role:c.h.PACIENTE,tipo:c.e.COUNT_PACIENTES_POR_DIAGNOSTICO};this._estadisticasFacade.distpachActionLoadEvolucionDiariaPacientes({idHospital:t.idHospital._id,role:c.h.PACIENTE,tipo:c.e.COUNT_PACIENTES_POR_DIA_POR_DIAGNOSTICO}),this._estadisticasFacade.distpachActionLoadPacientesPorDiagnostico(o);let i={idHospital:t.idHospital._id,role:c.h.DOCTOR,tipo:c.e.COUNT_USER_POR_ROLE_AND_HOSPITAL};this._estadisticasFacade.distpachActionLoadUsuariosPorRol({idHospital:t.idHospital._id,role:c.h.PACIENTE,tipo:c.e.COUNT_USER_POR_ROLE_AND_HOSPITAL}),this._estadisticasFacade.distpachActionLoadUsuariosPorRol(i)}),this._estadisticasFacade.getCountPacientesPorDiagnosticoDiarioFromStorage().pipe(Object(b.a)(this._destroyed$)).subscribe(t=>{this.buildLineChartData(t)}),this._estadisticasFacade.getCountPacientesPorDiagnosticoFromStorage().pipe(Object(b.a)(this._destroyed$)).subscribe(t=>{let o=t.find(t=>t.agrupadoPor.diagnostico_enum===c.b.CONFIRMADO),i=t.find(t=>t.agrupadoPor.diagnostico_enum===c.b.SOSPECHOSO),e=t.find(t=>t.agrupadoPor.diagnostico_enum===c.b.PROBABLE),a=t.find(t=>t.agrupadoPor.diagnostico_enum===c.b.RECUPERADO),s=t.find(t=>t.agrupadoPor.diagnostico_enum===c.b.HOSPITALIZADO),n=t.find(t=>t.agrupadoPor.diagnostico_enum===c.b.FALLECIDO);this.doughnutChartDataDiagnostico=[o?o.contador:0,i?i.contador:0,e?e.contador:0,a?a.contador:0,s?s.contador:0,n?n.contador:0]}),this.isLoadingPacientesPorDiagnostico$=this._estadisticasFacade.getIsloadingCountDiagnoticoFromStorage(),this.isLoadingChartEvolucionDiariaPacietes$=this._estadisticasFacade.getIsloadingCountDiagnoticoDiarioFromStorage(),this.totalDoctores$=this._estadisticasFacade.getTotalDoctoresFromStorage(),this.totalPacientes$=this._estadisticasFacade.getTotalPacientesFromStorage(),this.isLoadingTotalDoctores$=this._estadisticasFacade.getIsLoadingTotalDoctoresFromStorage(),this.isLoadingTotalPacientes$=this._estadisticasFacade.getIsLoadingTotalPacientesFromStorage()}transformDate(t){return new Date(new Date(t).getFullYear(),new Date(t).getMonth(),new Date(t).getUTCDate())}buildLineChartData(t){this.dataDiaDiagnostico=[],this.lineChartLabelsDays=[];let o=O.chain(t).map(t=>Object.assign(Object.assign({},t),{agrupadoPor:{fecha_creacion:t.agrupadoPor.fecha_creacion,diagnostico_enum:t.agrupadoPor.diagnostico_enum,fecha_trasformada:this.transformDate(t.agrupadoPor.fecha_creacion).toLocaleDateString()}})).orderBy(t=>t.agrupadoPor.fecha_creacion).groupBy(t=>t.agrupadoPor.fecha_trasformada).value(),i=[];for(const n in o){i.push(n);let t=o[n].find(t=>t.agrupadoPor.diagnostico_enum===c.b.SOSPECHOSO),e=o[n].find(t=>t.agrupadoPor.diagnostico_enum===c.b.CONFIRMADO),a=o[n].find(t=>t.agrupadoPor.diagnostico_enum===c.b.PROBABLE);this.dataDiaDiagnostico.push({data:[t?t.contador:0,e?e.contador:0,a?a.contador:0],fecha:n})}let e=[],a=[],s=[];this.dataDiaDiagnostico.forEach((t,o)=>{o>0?(e.push(t.data[0]+e[o-1]),a.push(t.data[1]+a[o-1]),s.push(t.data[2]+s[o-1])):(e.push(t.data[0]),a.push(t.data[1]),s.push(t.data[2]))}),this.lineChartDataPacientes[0].data=a,this.lineChartDataPacientes[1].data=e,this.lineChartLabelsDays=i}calcularPorcentaje(t,o){return t<1?0:100*t/o}openModalFilter(){this._spinner.show(),this._verDetalleEspacioUseCase.execute({idEspacio:this.hospital.idHospital.idEspacio}).pipe(Object(b.a)(this._destroyed$)).subscribe(t=>{switch(this._spinner.hide(),this.modalFilter=this._modalService.open(u.a),this.modalFilter.componentInstance.espacio=Object.assign({},t),this.modalFilter.componentInstance.idHospital=this.hospital.idHospital._id,t.tipo){case c.d.PROVINCIA:this.espacios[0]=t;break;case c.d.CANTON:this.espacios[1]=t;break;case c.d.PARROQUIA:this.espacios[2]=t;break;case c.d.BARRIO:this.espacios[3]=t}this.modalFilter.componentInstance.objectLugares=this.espacios,this.modalFilter.result.then(t=>{this.espacios=t}).catch(t=>console.log("salio"))},t=>{this._toast.showError("Error el cargar, error:"+t.message),this._spinner.hide()})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}return t.\u0275fac=function(o){return new(o||t)(g.Pb(n.a),g.Pb(p.u),g.Pb(r.j),g.Pb(h.c),g.Pb(d.d),g.Pb(s.a))},t.\u0275cmp=g.Jb({type:t,selectors:[["app-statistics"]],decls:45,vars:33,consts:[[1,"row"],[1,"col","col-md-1"],[3,"click"],[1,"col","col-md-11"],[4,"ngFor","ngForOf"],[1,"col-12"],[3,"isLoading$","isLoadingTotalPacientes$","isLoadingTotalDoctores$","totalDoctores$","totalPacientes$","datosPorDiagnostico"],[1,"col-lg-9","col-md-12"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-wrap","m-b-30"],[1,"card-title"],[1,"lstick"],[4,"ngIf"],[1,"ml-auto"],[1,"list-inline"],[1,"list-inline-item"],[1,"text-info"],[1,"fa","fa-circle","font-10","m-r-10"],[1,"text-success"],[2,"height","370px"],["baseChart","",3,"datasets","labels","options","colors","legend","chartType"],[1,"col-lg-3","col-md-12"],[2,"height","220px"],["baseChart","","height","100px",3,"data","labels","options","legend","chartType","colors"],[1,"table","vm","font-14","m-b-0"],[1,"border-0"],[1,"text-right","font-medium","border-0"],[1,"text-right","font-medium"]],template:function(t,o){1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Vb(2,"button",2),g.hc("click",(function(t){return o.openModalFilter()})),g.Pc(3,"Filtrar"),g.Ub(),g.Ub(),g.Vb(4,"div",3),g.Nc(5,W,5,4,"ng-container",4),g.Ub(),g.Ub(),g.Vb(6,"div",0),g.Vb(7,"div",5),g.Qb(8,"app-project-counter",6),g.Ub(),g.Ub(),g.Vb(9,"div",0),g.Vb(10,"div",7),g.Vb(11,"div",8),g.Vb(12,"div",9),g.Vb(13,"div",10),g.Vb(14,"div"),g.Vb(15,"h4",11),g.Qb(16,"span",12),g.Pc(17,"Evoluci\xf3n diar\xeda"),g.Ub(),g.Nc(18,G,2,0,"div",13),g.mc(19,"async"),g.Ub(),g.Vb(20,"div",14),g.Vb(21,"ul",15),g.Vb(22,"li",16),g.Vb(23,"h6",17),g.Qb(24,"i",18),g.Pc(25,"Confirmados"),g.Ub(),g.Ub(),g.Vb(26,"li",16),g.Vb(27,"h6",19),g.Qb(28,"i",18),g.Pc(29," Sospechosos "),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(30,"div",20),g.Qb(31,"canvas",21),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(32,"div",22),g.Vb(33,"div",8),g.Vb(34,"div",9),g.Vb(35,"h4",11),g.Qb(36,"span",12),g.Pc(37,"Pacientes"),g.Ub(),g.Nc(38,X,2,0,"div",13),g.mc(39,"async"),g.Vb(40,"div",23),g.Qb(41,"canvas",24),g.Ub(),g.Vb(42,"table",25),g.Nc(43,K,37,24,"ng-container",13),g.mc(44,"async"),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.Ab(5),g.sc("ngForOf",o.espacios),g.Ab(3),g.sc("isLoading$",o.isLoadingPacientesPorDiagnostico$)("isLoadingTotalPacientes$",o.isLoadingTotalPacientes$)("isLoadingTotalDoctores$",o.isLoadingTotalDoctores$)("totalDoctores$",o.totalDoctores$)("totalPacientes$",o.totalPacientes$)("datosPorDiagnostico",o.doughnutChartDataDiagnostico),g.Ab(10),g.sc("ngIf",g.nc(19,22,o.isLoadingChartEvolucionDiariaPacietes$)),g.Ab(13),g.sc("datasets",o.lineChartDataPacientes)("labels",o.lineChartLabelsDays)("options",o.lineChartOptions)("colors",o.lineChartColors)("legend",o.lineChartLegend)("chartType",o.lineChartType),g.Ab(7),g.sc("ngIf",g.nc(39,24,o.isLoadingPacientesPorDiagnostico$)),g.Ab(3),g.sc("data",o.doughnutChartDataDiagnostico)("labels",o.doughnutChartLabels)("options",o.doughnutChartOptions)("legend",o.doughnutChartLegend)("chartType",o.doughnutChartType)("colors",g.wc(31,tt,g.wc(29,q,g.vc(28,Y)))),g.Ab(2),g.sc("ngIf",g.nc(44,26,o.totalPacientes$)))},directives:[e.n,B,e.o,z.a],pipes:[e.b,e.f],styles:[".ct-series-c[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#eceff1}.ct-series-d[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#745af2}.ct-series-b[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#26c6da}.ct-series-a[_ngcontent-%COMP%]   .ct-slice-donut[_ngcontent-%COMP%]{stroke:#1e88e5}"]}),t})();var it=i("1kJB");let et=(()=>{class t{constructor(t){this._estRepo=t}execute(t){return this._estRepo.getCountStatistics(t)}}return t.\u0275fac=function(o){return new(o||t)(g.dc(it.b))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),at=(()=>{class t{constructor(t){this._estRepo=t}execute(t){return this._estRepo.getCountStatistics(t)}}return t.\u0275fac=function(o){return new(o||t)(g.dc(it.b))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),st=(()=>{class t{constructor(t){this._estRepo=t}execute(t){return this._estRepo.getCountStatistics(t)}}return t.\u0275fac=function(o){return new(o||t)(g.dc(it.b))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),nt=(()=>{class t{constructor(t){this._estRepo=t}execute(t){return this._estRepo.getEstadisticasMapas(t)}}return t.\u0275fac=function(o){return new(o||t)(g.dc(it.b))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ct=(()=>{class t{constructor(t){this._estRepo=t}execute(t){return this._estRepo.getUsuarioSinSeguimientosPorDia(t)}}return t.\u0275fac=function(o){return new(o||t)(g.dc(it.b))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const rt=function(t,o,i){return{success:t,warning:o,danger:i}};function dt(t,o){if(1&t&&(g.Vb(0,"li"),g.Pc(1),g.Vb(2,"label",5),g.Pc(3),g.Ub(),g.Ub()),2&t){const t=o.$implicit;g.Ab(1),g.Sc(" ",null==t?null:t.name," ",null==t?null:t.lastname," "),g.Ab(1),g.sc("ngClass",g.yc(4,rt,"PROBABLE"==(null==t?null:null==t.ultimoSeguimiento?null:t.ultimoSeguimiento.diagnostico_actual),"SOSPECHOSO"==(null==t?null:null==t.ultimoSeguimiento?null:t.ultimoSeguimiento.diagnostico_actual),"CONFIRMADO"==(null==t?null:null==t.ultimoSeguimiento?null:t.ultimoSeguimiento.diagnostico_actual))),g.Ab(1),g.Rc(" ",null==t?null:null==t.ultimoSeguimiento?null:t.ultimoSeguimiento.diagnostico_actual," ")}}const lt=[{path:"",children:[{path:"mapas",component:C,data:{title:"Mapas"}},{path:"estadisticas",component:ot,data:{title:"Estad\xedsticas"}},{path:"pacientes-sin-seguimiento",component:(()=>{class t{constructor(t,o,i){this._verPacientesSinSeguimientosPorDiaUseCase=t,this._spinner=o,this._mainFacade=i}ngOnInit(){this._mainFacade.getHospitalSesion().subscribe(t=>{console.log(t),this.hospitalSesion=t})}buscar(t){console.log(t);let o={fecha:t,idHospital:this.hospitalSesion.idHospital._id};this._spinner.show(),this._verPacientesSinSeguimientosPorDiaUseCase.execute(o).subscribe(t=>{this._spinner.hide(),console.log(t),this.pacientes=t},t=>{this._spinner.hide()})}}return t.\u0275fac=function(o){return new(o||t)(g.Pb(ct),g.Pb(h.c),g.Pb(s.a))},t.\u0275cmp=g.Jb({type:t,selectors:[["app-sin-seguimiento"]],decls:10,vars:1,consts:[[1,"row"],["type","date","placeholder","Ingrese el d\xeda"],["fecha",""],[3,"click"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,o){if(1&t){const t=g.Wb();g.Vb(0,"div",0),g.Qb(1,"input",1,2),g.Vb(3,"button",3),g.hc("click",(function(i){g.Fc(t);const e=g.Cc(2);return o.buscar(e.value)})),g.Pc(4,"Generar reporte"),g.Ub(),g.Ub(),g.Qb(5,"br"),g.Qb(6,"br"),g.Vb(7,"div",0),g.Vb(8,"ol"),g.Nc(9,dt,4,8,"li",4),g.Ub(),g.Ub()}2&t&&(g.Ab(9),g.sc("ngForOf",o.pacientes))},directives:[e.n,e.m],styles:[".success[_ngcontent-%COMP%]{background-color:#adff2f}.warning[_ngcontent-%COMP%]{background-color:orange}.danger[_ngcontent-%COMP%]{background-color:red}"]}),t})(),data:{title:"Reporte de Pacientes Sin Seguimientos"}}]}];let bt=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(o){return new(o||t)},imports:[[a.j.forChild(lt)],a.j]}),t})();var ut=i("3Pt+"),gt=i("Cr32"),ht=i("Kdsb"),pt=i("ZOsW");let ft=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(o){return new(o||t)},imports:[[ut.l,ut.y,e.c,p.w,z.b,gt.b,ht.c,pt.b],p.w,z.b,gt.b,ht.c,pt.b]}),t})();var Pt=i("pxUr"),mt=i("snw9"),Ut=i("eIep"),Ct=i("lJxs"),Ot=i("JIr8"),vt=i("5+tZ"),_t=i("vkgz"),Dt=i("LRne"),Vt=i("HDdC"),At=i("m4KN"),It=function(t,o,i,e){var a,s=arguments.length,n=s<3?o:null===e?e=Object.getOwnPropertyDescriptor(o,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,o,i,e);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(n=(s<3?a(n):s>3?a(o,i,n):a(o,i))||n);return s>3&&n&&Object.defineProperty(o,i,n),n},Lt=function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)};let St=(()=>{class t{constructor(t,o,i,e,a,s,n){this.actions$=t,this._verTotalPacientesDiagnosticoUseCase=o,this._verEvolucionDiariaDiagnosticoUseCase=i,this._verTotalUsuariosPorRolUseCase=e,this._verCoordenasPorDiagnosticoUseCase=a,this._toastService=s,this._spinner=n,this.loadPacientesPorDiagnostico=this.actions$.pipe(Object(mt.d)(At.g),Object(Ut.a)(({input:t})=>this._verTotalPacientesDiagnosticoUseCase.execute(t).pipe(Object(Ct.a)(t=>At.i({output:t})),Object(Ot.a)(t=>(this._toastService.showError("error al consultar los diagnosticos, error:"+t.message),Object(Dt.a)(At.h({error:t}))))))),this.loadEvolucionDiariaPacientes=this.actions$.pipe(Object(mt.d)(At.d),Object(Ut.a)(({input:t})=>this._verEvolucionDiariaDiagnosticoUseCase.execute(t).pipe(Object(Ct.a)(t=>At.f({output:t})),Object(Ot.a)(t=>(this._toastService.showError("error al consultar la evoluci\xf3n diaria, error:"+t.message),Object(Dt.a)(At.e({error:t}))))))),this.loadTotalPersonal=this.actions$.pipe(Object(mt.d)(At.j),Object(vt.a)(({input:t})=>this._verTotalUsuariosPorRolUseCase.execute(t).pipe(Object(Ct.a)(o=>At.l({output:o,role:t.role})),Object(Ot.a)(o=>(this._toastService.showError(`error al cargar el total de \n                        ${t.role===c.h.PACIENTE?"pacientes":"doctores"}, error:${o.message}`),Object(Dt.a)(At.k({error:o,role:t.role}))))))),this.loadCoordenadasPorDiagnostico=this.actions$.pipe(Object(mt.d)(At.a),Object(_t.a)(t=>this._spinner.show()),Object(Ut.a)(({input:t})=>this._verCoordenasPorDiagnosticoUseCase.execute(t).pipe(Object(Ct.a)(t=>At.c({output:t})),Object(Ot.a)(t=>(this._toastService.showError("Error al cargar coordenadas, error: "+t.message),Object(Dt.a)(At.b({error:t})))))),Object(_t.a)(t=>this._spinner.hide()))}}return t.\u0275fac=function(o){return new(o||t)(g.dc(mt.a),g.dc(et),g.dc(at),g.dc(st),g.dc(nt),g.dc(d.d),g.dc(h.c))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac}),It([Object(mt.b)(),Lt("design:type",Vt.a)],t.prototype,"loadPacientesPorDiagnostico",void 0),It([Object(mt.b)(),Lt("design:type",Vt.a)],t.prototype,"loadEvolucionDiariaPacientes",void 0),It([Object(mt.b)(),Lt("design:type",Vt.a)],t.prototype,"loadTotalPersonal",void 0),It([Object(mt.b)(),Lt("design:type",Vt.a)],t.prototype,"loadCoordenadasPorDiagnostico",void 0),t})();var yt=i("m7o+"),Et=i("kt0X");i.d(o,"DirectorModule",(function(){return Ft}));let Ft=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(o){return new(o||t)},imports:[[e.c,bt,Pt.a,ft,Et.j.forFeature("estadisticas",yt.a),mt.c.forFeature([St])]]}),t})()}}]);